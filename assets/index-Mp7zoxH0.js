(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const It={},_r=[],Fe=()=>{},Dh=()=>!1,oo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ja=e=>e.startsWith("onUpdate:"),ue=Object.assign,Ya=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},om=Object.prototype.hasOwnProperty,yt=(e,t)=>om.call(e,t),nt=Array.isArray,yr=e=>Bs(e)==="[object Map]",xh=e=>Bs(e)==="[object Set]",Bu=e=>Bs(e)==="[object Date]",it=e=>typeof e=="function",Ft=e=>typeof e=="string",Ve=e=>typeof e=="symbol",At=e=>e!==null&&typeof e=="object",Nh=e=>(At(e)||it(e))&&it(e.then)&&it(e.catch),Oh=Object.prototype.toString,Bs=e=>Oh.call(e),am=e=>Bs(e).slice(8,-1),kh=e=>Bs(e)==="[object Object]",Za=e=>Ft(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,cs=Xa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ao=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},lm=/-\w/g,Sn=ao(e=>e.replace(lm,t=>t.slice(1).toUpperCase())),um=/\B([A-Z])/g,Yn=ao(e=>e.replace(um,"-$1").toLowerCase()),Mh=ao(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qo=ao(e=>e?`on${Mh(e)}`:""),En=(e,t)=>!Object.is(e,t),wi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Fh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},tl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Uu;const lo=()=>Uu||(Uu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nr(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ft(r)?dm(r):Nr(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ft(e)||At(e))return e}const cm=/;(?![^(]*\))/g,hm=/:([^]+)/,fm=/\/\*[^]*?\*\//g;function dm(e){const t={};return e.replace(fm,"").split(cm).forEach(n=>{if(n){const r=n.split(hm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function el(e){let t="";if(Ft(e))t=e;else if(nt(e))for(let n=0;n<e.length;n++){const r=el(e[n]);r&&(t+=r+" ")}else if(At(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const pm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mm=Xa(pm);function Lh(e){return!!e||e===""}function gm(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Oi(e[r],t[r]);return n}function Oi(e,t){if(e===t)return!0;let n=Bu(e),r=Bu(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Ve(e),r=Ve(t),n||r)return e===t;if(n=nt(e),r=nt(t),n||r)return n&&r?gm(e,t):!1;if(n=At(e),r=At(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Oi(e[a],t[a]))return!1}}return String(e)===String(t)}const Bh=e=>!!(e&&e.__v_isRef===!0),rs=e=>Ft(e)?e:e==null?"":nt(e)||At(e)&&(e.toString===Oh||!it(e.toString))?Bh(e)?rs(e.value):JSON.stringify(e,Uh,2):String(e),Uh=(e,t)=>Bh(t)?Uh(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Xo(r,i)+" =>"]=s,n),{})}:xh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Xo(n))}:Ve(t)?Xo(t):At(t)&&!nt(t)&&!kh(t)?String(t):t,Xo=(e,t="")=>{var n;return Ve(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let se;class jh{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=se,!t&&se&&(this.index=(se.scopes||(se.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=se;try{return se=this,t()}finally{se=n}}}on(){++this._on===1&&(this.prevScope=se,se=this)}off(){this._on>0&&--this._on===0&&(se=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function $h(e){return new jh(e)}function qh(){return se}function _m(e,t=!1){se&&se.cleanups.push(e)}let bt;const Jo=new WeakSet;class Hh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,se&&se.active&&se.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jo.has(this)&&(Jo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ju(this),Wh(this);const t=bt,n=Pe;bt=this,Pe=!0;try{return this.fn()}finally{Gh(this),bt=t,Pe=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)sl(t);this.deps=this.depsTail=void 0,ju(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_a(this)&&this.run()}get dirty(){return _a(this)}}let zh=0,hs,fs;function Kh(e,t=!1){if(e.flags|=8,t){e.next=fs,fs=e;return}e.next=hs,hs=e}function nl(){zh++}function rl(){if(--zh>0)return;if(fs){let t=fs;for(fs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;hs;){let t=hs;for(hs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Wh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),sl(r),ym(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function _a(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===As)||(e.globalVersion=As,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!_a(e))))return;e.flags|=2;const t=e.dep,n=bt,r=Pe;bt=e,Pe=!0;try{Wh(e);const s=e.fn(e._value);(t.version===0||En(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{bt=n,Pe=r,Gh(e),e.flags&=-3}}function sl(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)sl(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ym(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Pe=!0;const Xh=[];function nn(){Xh.push(Pe),Pe=!1}function rn(){const e=Xh.pop();Pe=e===void 0?!0:e}function ju(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=bt;bt=void 0;try{t()}finally{bt=n}}}let As=0;class vm{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class il{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!bt||!Pe||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new vm(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,Jh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=r)}return n}trigger(t){this.version++,As++,this.notify(t)}notify(t){nl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rl()}}}function Jh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Jh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ki=new WeakMap,Gn=Symbol(""),ya=Symbol(""),bs=Symbol("");function oe(e,t,n){if(Pe&&bt){let r=ki.get(e);r||ki.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new il),s.map=r,s.key=n),s.track()}}function Ze(e,t,n,r,s,i){const a=ki.get(e);if(!a){As++;return}const l=c=>{c&&c.trigger()};if(nl(),t==="clear")a.forEach(l);else{const c=nt(e),f=c&&Za(n);if(c&&n==="length"){const d=Number(r);a.forEach((m,v)=>{(v==="length"||v===bs||!Ve(v)&&v>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(bs)),t){case"add":c?f&&l(a.get("length")):(l(a.get(Gn)),yr(e)&&l(a.get(ya)));break;case"delete":c||(l(a.get(Gn)),yr(e)&&l(a.get(ya)));break;case"set":yr(e)&&l(a.get(Gn));break}}rl()}function Em(e,t){const n=ki.get(e);return n&&n.get(t)}function ur(e){const t=pt(e);return t===e?t:(oe(t,"iterate",bs),Ae(e)?t:t.map(Jt))}function uo(e){return oe(e=pt(e),"iterate",bs),e}const Tm={__proto__:null,[Symbol.iterator](){return Yo(this,Symbol.iterator,Jt)},concat(...e){return ur(this).concat(...e.map(t=>nt(t)?ur(t):t))},entries(){return Yo(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return Je(this,"every",e,t,void 0,arguments)},filter(e,t){return Je(this,"filter",e,t,n=>n.map(Jt),arguments)},find(e,t){return Je(this,"find",e,t,Jt,arguments)},findIndex(e,t){return Je(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Je(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return Je(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Je(this,"forEach",e,t,void 0,arguments)},includes(...e){return Zo(this,"includes",e)},indexOf(...e){return Zo(this,"indexOf",e)},join(e){return ur(this).join(e)},lastIndexOf(...e){return Zo(this,"lastIndexOf",e)},map(e,t){return Je(this,"map",e,t,void 0,arguments)},pop(){return ts(this,"pop")},push(...e){return ts(this,"push",e)},reduce(e,...t){return $u(this,"reduce",e,t)},reduceRight(e,...t){return $u(this,"reduceRight",e,t)},shift(){return ts(this,"shift")},some(e,t){return Je(this,"some",e,t,void 0,arguments)},splice(...e){return ts(this,"splice",e)},toReversed(){return ur(this).toReversed()},toSorted(e){return ur(this).toSorted(e)},toSpliced(...e){return ur(this).toSpliced(...e)},unshift(...e){return ts(this,"unshift",e)},values(){return Yo(this,"values",Jt)}};function Yo(e,t,n){const r=uo(e),s=r[t]();return r!==e&&!Ae(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Im=Array.prototype;function Je(e,t,n,r,s,i){const a=uo(e),l=a!==e&&!Ae(e),c=a[t];if(c!==Im[t]){const m=c.apply(e,i);return l?Jt(m):m}let f=n;a!==e&&(l?f=function(m,v){return n.call(this,Jt(m),v,e)}:n.length>2&&(f=function(m,v){return n.call(this,m,v,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function $u(e,t,n,r){const s=uo(e);let i=n;return s!==e&&(Ae(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Jt(l),c,e)}),s[t](i,...r)}function Zo(e,t,n){const r=pt(e);oe(r,"iterate",bs);const s=r[t](...n);return(s===-1||s===!1)&&ll(n[0])?(n[0]=pt(n[0]),r[t](...n)):s}function ts(e,t,n=[]){nn(),nl();const r=pt(e)[t].apply(e,n);return rl(),rn(),r}const wm=Xa("__proto__,__v_isRef,__isVue"),Yh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ve));function Am(e){Ve(e)||(e=String(e));const t=pt(this);return oe(t,"has",e),t.hasOwnProperty(e)}class Zh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Om:rf:i?nf:ef).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=nt(t);if(!s){let c;if(a&&(c=Tm[n]))return c;if(n==="hasOwnProperty")return Am}const l=Reflect.get(t,n,wt(t)?t:r);if((Ve(n)?Yh.has(n):wm(n))||(s||oe(t,"get",n),i))return l;if(wt(l)){const c=a&&Za(n)?l:l.value;return s&&At(c)?Ea(c):c}return At(l)?s?Ea(l):co(l):l}}class tf extends Zh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=Rn(i);if(!Ae(r)&&!Rn(r)&&(i=pt(i),r=pt(r)),!nt(t)&&wt(i)&&!wt(r))return c||(i.value=r),!0}const a=nt(t)&&Za(n)?Number(n)<t.length:yt(t,n),l=Reflect.set(t,n,r,wt(t)?t:s);return t===pt(s)&&(a?En(r,i)&&Ze(t,"set",n,r):Ze(t,"add",n,r)),l}deleteProperty(t,n){const r=yt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ze(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Ve(n)||!Yh.has(n))&&oe(t,"has",n),r}ownKeys(t){return oe(t,"iterate",nt(t)?"length":Gn),Reflect.ownKeys(t)}}class bm extends Zh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Sm=new tf,Rm=new bm,Cm=new tf(!0);const va=e=>e,hi=e=>Reflect.getPrototypeOf(e);function Pm(e,t,n){return function(...r){const s=this.__v_raw,i=pt(s),a=yr(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?va:t?Mi:Jt;return!t&&oe(i,"iterate",c?ya:Gn),{next(){const{value:m,done:v}=f.next();return v?{value:m,done:v}:{value:l?[d(m[0]),d(m[1])]:d(m),done:v}},[Symbol.iterator](){return this}}}}function fi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Vm(e,t){const n={get(s){const i=this.__v_raw,a=pt(i),l=pt(s);e||(En(s,l)&&oe(a,"get",s),oe(a,"get",l));const{has:c}=hi(a),f=t?va:e?Mi:Jt;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&oe(pt(s),"iterate",Gn),s.size},has(s){const i=this.__v_raw,a=pt(i),l=pt(s);return e||(En(s,l)&&oe(a,"has",s),oe(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=pt(l),f=t?va:e?Mi:Jt;return!e&&oe(c,"iterate",Gn),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return ue(n,e?{add:fi("add"),set:fi("set"),delete:fi("delete"),clear:fi("clear")}:{add(s){!t&&!Ae(s)&&!Rn(s)&&(s=pt(s));const i=pt(this);return hi(i).has.call(i,s)||(i.add(s),Ze(i,"add",s,s)),this},set(s,i){!t&&!Ae(i)&&!Rn(i)&&(i=pt(i));const a=pt(this),{has:l,get:c}=hi(a);let f=l.call(a,s);f||(s=pt(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?En(i,d)&&Ze(a,"set",s,i):Ze(a,"add",s,i),this},delete(s){const i=pt(this),{has:a,get:l}=hi(i);let c=a.call(i,s);c||(s=pt(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&Ze(i,"delete",s,void 0),f},clear(){const s=pt(this),i=s.size!==0,a=s.clear();return i&&Ze(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Pm(s,e,t)}),n}function ol(e,t){const n=Vm(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(yt(n,s)&&s in r?n:r,s,i)}const Dm={get:ol(!1,!1)},xm={get:ol(!1,!0)},Nm={get:ol(!0,!1)};const ef=new WeakMap,nf=new WeakMap,rf=new WeakMap,Om=new WeakMap;function km(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mm(e){return e.__v_skip||!Object.isExtensible(e)?0:km(am(e))}function co(e){return Rn(e)?e:al(e,!1,Sm,Dm,ef)}function Fm(e){return al(e,!1,Cm,xm,nf)}function Ea(e){return al(e,!0,Rm,Nm,rf)}function al(e,t,n,r,s){if(!At(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Mm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function en(e){return Rn(e)?en(e.__v_raw):!!(e&&e.__v_isReactive)}function Rn(e){return!!(e&&e.__v_isReadonly)}function Ae(e){return!!(e&&e.__v_isShallow)}function ll(e){return e?!!e.__v_raw:!1}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}function ul(e){return!yt(e,"__v_skip")&&Object.isExtensible(e)&&Fh(e,"__v_skip",!0),e}const Jt=e=>At(e)?co(e):e,Mi=e=>At(e)?Ea(e):e;function wt(e){return e?e.__v_isRef===!0:!1}function Ss(e){return Lm(e,!1)}function Lm(e,t){return wt(e)?e:new Bm(e,t)}class Bm{constructor(t,n){this.dep=new il,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:pt(t),this._value=n?t:Jt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ae(t)||Rn(t);t=r?t:pt(t),En(t,n)&&(this._rawValue=t,this._value=r?t:Jt(t),this.dep.trigger())}}function qt(e){return wt(e)?e.value:e}const Um={get:(e,t,n)=>t==="__v_raw"?e:qt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return wt(s)&&!wt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function sf(e){return en(e)?e:new Proxy(e,Um)}function jm(e){const t=nt(e)?new Array(e.length):{};for(const n in e)t[n]=of(e,n);return t}class $m{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Em(pt(this._object),this._key)}}class qm{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Hm(e,t,n){return wt(e)?e:it(e)?new qm(e):At(e)&&arguments.length>1?of(e,t,n):Ss(e)}function of(e,t,n){const r=e[t];return wt(r)?r:new $m(e,t,n)}class zm{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new il(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=As-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return Kh(this,!0),!0}get value(){const t=this.dep.track();return Qh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Km(e,t,n=!1){let r,s;return it(e)?r=e:(r=e.get,s=e.set),new zm(r,s,n)}const di={},Fi=new WeakMap;let Hn;function Wm(e,t=!1,n=Hn){if(n){let r=Fi.get(n);r||Fi.set(n,r=[]),r.push(e)}}function Gm(e,t,n=It){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=z=>s?z:Ae(z)||s===!1||s===0?tn(z,1):tn(z);let d,m,v,b,V=!1,D=!1;if(wt(e)?(m=()=>e.value,V=Ae(e)):en(e)?(m=()=>f(e),V=!0):nt(e)?(D=!0,V=e.some(z=>en(z)||Ae(z)),m=()=>e.map(z=>{if(wt(z))return z.value;if(en(z))return f(z);if(it(z))return c?c(z,2):z()})):it(e)?t?m=c?()=>c(e,2):e:m=()=>{if(v){nn();try{v()}finally{rn()}}const z=Hn;Hn=d;try{return c?c(e,3,[b]):e(b)}finally{Hn=z}}:m=Fe,t&&s){const z=m,lt=s===!0?1/0:s;m=()=>tn(z(),lt)}const F=qh(),W=()=>{d.stop(),F&&F.active&&Ya(F.effects,d)};if(i&&t){const z=t;t=(...lt)=>{z(...lt),W()}}let K=D?new Array(e.length).fill(di):di;const Q=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const lt=d.run();if(s||V||(D?lt.some((Et,I)=>En(Et,K[I])):En(lt,K))){v&&v();const Et=Hn;Hn=d;try{const I=[lt,K===di?void 0:D&&K[0]===di?[]:K,b];K=lt,c?c(t,3,I):t(...I)}finally{Hn=Et}}}else d.run()};return l&&l(Q),d=new Hh(m),d.scheduler=a?()=>a(Q,!1):Q,b=z=>Wm(z,!1,d),v=d.onStop=()=>{const z=Fi.get(d);if(z){if(c)c(z,4);else for(const lt of z)lt();Fi.delete(d)}},t?r?Q(!0):K=d.run():a?a(Q.bind(null,!0),!0):d.run(),W.pause=d.pause.bind(d),W.resume=d.resume.bind(d),W.stop=W,W}function tn(e,t=1/0,n){if(t<=0||!At(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,wt(e))tn(e.value,t,n);else if(nt(e))for(let r=0;r<e.length;r++)tn(e[r],t,n);else if(xh(e)||yr(e))e.forEach(r=>{tn(r,t,n)});else if(kh(e)){for(const r in e)tn(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&tn(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Us(e,t,n,r){try{return r?e(...r):e()}catch(s){ho(s,t,n)}}function qe(e,t,n,r){if(it(e)){const s=Us(e,t,n,r);return s&&Nh(s)&&s.catch(i=>{ho(i,t,n)}),s}if(nt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(qe(e[i],t,n,r));return s}}function ho(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,c,f)===!1)return}l=l.parent}if(i){nn(),Us(i,null,10,[e,c,f]),rn();return}}Qm(e,n,s,r,a)}function Qm(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const de=[];let Oe=-1;const vr=[];let mn=null,fr=0;const af=Promise.resolve();let Li=null;function lf(e){const t=Li||af;return e?t.then(this?e.bind(this):e):t}function Xm(e){let t=Oe+1,n=de.length;for(;t<n;){const r=t+n>>>1,s=de[r],i=Rs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function cl(e){if(!(e.flags&1)){const t=Rs(e),n=de[de.length-1];!n||!(e.flags&2)&&t>=Rs(n)?de.push(e):de.splice(Xm(t),0,e),e.flags|=1,uf()}}function uf(){Li||(Li=af.then(hf))}function Jm(e){nt(e)?vr.push(...e):mn&&e.id===-1?mn.splice(fr+1,0,e):e.flags&1||(vr.push(e),e.flags|=1),uf()}function qu(e,t,n=Oe+1){for(;n<de.length;n++){const r=de[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;de.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function cf(e){if(vr.length){const t=[...new Set(vr)].sort((n,r)=>Rs(n)-Rs(r));if(vr.length=0,mn){mn.push(...t);return}for(mn=t,fr=0;fr<mn.length;fr++){const n=mn[fr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}mn=null,fr=0}}const Rs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hf(e){try{for(Oe=0;Oe<de.length;Oe++){const t=de[Oe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Us(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Oe<de.length;Oe++){const t=de[Oe];t&&(t.flags&=-2)}Oe=-1,de.length=0,cf(),Li=null,(de.length||vr.length)&&hf()}}let le=null,ff=null;function Bi(e){const t=le;return le=e,ff=e&&e.type.__scopeId||null,t}function ss(e,t=le,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Zu(-1);const i=Bi(t);let a;try{a=e(...s)}finally{Bi(i),r._d&&Zu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function es(e,t){if(le===null)return e;const n=go(le),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=It]=t[s];i&&(it(i)&&(i={mounted:i,updated:i}),i.deep&&tn(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function $n(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(nn(),qe(c,n,8,[e.el,l,e,t]),rn())}}const Ym=Symbol("_vte"),Zm=e=>e.__isTeleport,tg=Symbol("_leaveCb");function hl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,hl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function js(e,t){return it(e)?ue({name:e.name},t,{setup:e}):e}function df(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ui=new WeakMap;function ds(e,t,n,r,s=!1){if(nt(e)){e.forEach((V,D)=>ds(V,t&&(nt(t)?t[D]:t),n,r,s));return}if(Er(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ds(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?go(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,v=pt(m),b=m===It?Dh:V=>yt(v,V);if(f!=null&&f!==c){if(Hu(t),Ft(f))d[f]=null,b(f)&&(m[f]=null);else if(wt(f)){f.value=null;const V=t;V.k&&(d[V.k]=null)}}if(it(c))Us(c,l,12,[a,d]);else{const V=Ft(c),D=wt(c);if(V||D){const F=()=>{if(e.f){const W=V?b(c)?m[c]:d[c]:c.value;if(s)nt(W)&&Ya(W,i);else if(nt(W))W.includes(i)||W.push(i);else if(V)d[c]=[i],b(c)&&(m[c]=d[c]);else{const K=[i];c.value=K,e.k&&(d[e.k]=K)}}else V?(d[c]=a,b(c)&&(m[c]=a)):D&&(c.value=a,e.k&&(d[e.k]=a))};if(a){const W=()=>{F(),Ui.delete(e)};W.id=-1,Ui.set(e,W),_e(W,n)}else Hu(e),F()}}}function Hu(e){const t=Ui.get(e);t&&(t.flags|=8,Ui.delete(e))}lo().requestIdleCallback;lo().cancelIdleCallback;const Er=e=>!!e.type.__asyncLoader,pf=e=>e.type.__isKeepAlive;function eg(e,t){mf(e,"a",t)}function ng(e,t){mf(e,"da",t)}function mf(e,t,n=pe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(fo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)pf(s.parent.vnode)&&rg(r,t,n,s),s=s.parent}}function rg(e,t,n,r){const s=fo(t,e,r,!0);_f(()=>{Ya(r[t],s)},n)}function fo(e,t,n=pe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{nn();const l=$s(n),c=qe(t,n,e,a);return l(),rn(),c});return r?s.unshift(i):s.push(i),i}}const un=e=>(t,n=pe)=>{(!Ps||e==="sp")&&fo(e,(...r)=>t(...r),n)},sg=un("bm"),gf=un("m"),ig=un("bu"),og=un("u"),ag=un("bum"),_f=un("um"),lg=un("sp"),ug=un("rtg"),cg=un("rtc");function hg(e,t=pe){fo("ec",e,t)}const fg=Symbol.for("v-ndc");function _n(e,t,n,r){let s;const i=n,a=nt(e);if(a||Ft(e)){const l=a&&en(e);let c=!1,f=!1;l&&(c=!Ae(e),f=Rn(e),e=uo(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(c?f?Mi(Jt(e[d])):Jt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(At(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}function Ai(e,t,n={},r,s){if(le.ce||le.parent&&Er(le.parent)&&le.parent.ce){const f=Object.keys(n).length>0;return t!=="default"&&(n.name=t),_t(),yn(Ot,null,[ve("slot",n,r)],f?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),_t();const a=i&&yf(i(n)),l=n.key||a&&a.key,c=yn(Ot,{key:(l&&!Ve(l)?l:`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return!s&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function yf(e){return e.some(t=>pl(t)?!(t.type===sn||t.type===Ot&&!yf(t.children)):!0)?e:null}const Ta=e=>e?Bf(e)?go(e):Ta(e.parent):null,ps=ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ta(e.parent),$root:e=>Ta(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ef(e),$forceUpdate:e=>e.f||(e.f=()=>{cl(e.update)}),$nextTick:e=>e.n||(e.n=lf.bind(e.proxy)),$watch:e=>kg.bind(e)}),ta=(e,t)=>e!==It&&!e.__isScriptSetup&&yt(e,t),dg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const b=a[t];if(b!==void 0)switch(b){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(ta(r,t))return a[t]=1,r[t];if(s!==It&&yt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&yt(f,t))return a[t]=3,i[t];if(n!==It&&yt(n,t))return a[t]=4,n[t];Ia&&(a[t]=0)}}const d=ps[t];let m,v;if(d)return t==="$attrs"&&oe(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==It&&yt(n,t))return a[t]=4,n[t];if(v=c.config.globalProperties,yt(v,t))return v[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return ta(s,t)?(s[t]=n,!0):r!==It&&yt(r,t)?(r[t]=n,!0):yt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let c,f;return!!(n[l]||e!==It&&l[0]!=="$"&&yt(e,l)||ta(t,l)||(c=i[0])&&yt(c,l)||yt(r,l)||yt(ps,l)||yt(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:yt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function zu(e){return nt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ia=!0;function pg(e){const t=Ef(e),n=e.proxy,r=e.ctx;Ia=!1,t.beforeCreate&&Ku(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:m,mounted:v,beforeUpdate:b,updated:V,activated:D,deactivated:F,beforeDestroy:W,beforeUnmount:K,destroyed:Q,unmounted:z,render:lt,renderTracked:Et,renderTriggered:I,errorCaptured:g,serverPrefetch:_,expose:T,inheritAttrs:w,components:S,directives:E,filters:ce}=t;if(f&&mg(f,r,null),a)for(const ot in a){const mt=a[ot];it(mt)&&(r[ot]=mt.bind(n))}if(s){const ot=s.call(n,n);At(ot)&&(e.data=co(ot))}if(Ia=!0,i)for(const ot in i){const mt=i[ot],Se=it(mt)?mt.bind(n,n):it(mt.get)?mt.get.bind(n,n):Fe,kn=!it(mt)&&it(mt.set)?mt.set.bind(n):Fe,We=Ke({get:Se,set:kn});Object.defineProperty(r,ot,{enumerable:!0,configurable:!0,get:()=>We.value,set:Lt=>We.value=Lt})}if(l)for(const ot in l)vf(l[ot],r,n,ot);if(c){const ot=it(c)?c.call(n):c;Reflect.ownKeys(ot).forEach(mt=>{Tg(mt,ot[mt])})}d&&Ku(d,e,"c");function Vt(ot,mt){nt(mt)?mt.forEach(Se=>ot(Se.bind(n))):mt&&ot(mt.bind(n))}if(Vt(sg,m),Vt(gf,v),Vt(ig,b),Vt(og,V),Vt(eg,D),Vt(ng,F),Vt(hg,g),Vt(cg,Et),Vt(ug,I),Vt(ag,K),Vt(_f,z),Vt(lg,_),nt(T))if(T.length){const ot=e.exposed||(e.exposed={});T.forEach(mt=>{Object.defineProperty(ot,mt,{get:()=>n[mt],set:Se=>n[mt]=Se,enumerable:!0})})}else e.exposed||(e.exposed={});lt&&e.render===Fe&&(e.render=lt),w!=null&&(e.inheritAttrs=w),S&&(e.components=S),E&&(e.directives=E),_&&df(e)}function mg(e,t,n=Fe){nt(e)&&(e=wa(e));for(const r in e){const s=e[r];let i;At(s)?"default"in s?i=ms(s.from||r,s.default,!0):i=ms(s.from||r):i=ms(s),wt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Ku(e,t,n){qe(nt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function vf(e,t,n,r){let s=r.includes(".")?Nf(n,r):()=>n[r];if(Ft(e)){const i=t[e];it(i)&&bi(s,i)}else if(it(e))bi(s,e.bind(n));else if(At(e))if(nt(e))e.forEach(i=>vf(i,t,n,r));else{const i=it(e.handler)?e.handler.bind(n):t[e.handler];it(i)&&bi(s,i,e)}}function Ef(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>ji(c,f,a,!0)),ji(c,t,a)),At(t)&&i.set(t,c),c}function ji(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&ji(e,i,n,!0),s&&s.forEach(a=>ji(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=gg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const gg={data:Wu,props:Gu,emits:Gu,methods:is,computed:is,beforeCreate:fe,created:fe,beforeMount:fe,mounted:fe,beforeUpdate:fe,updated:fe,beforeDestroy:fe,beforeUnmount:fe,destroyed:fe,unmounted:fe,activated:fe,deactivated:fe,errorCaptured:fe,serverPrefetch:fe,components:is,directives:is,watch:yg,provide:Wu,inject:_g};function Wu(e,t){return t?e?function(){return ue(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function _g(e,t){return is(wa(e),wa(t))}function wa(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function fe(e,t){return e?[...new Set([].concat(e,t))]:t}function is(e,t){return e?ue(Object.create(null),e,t):t}function Gu(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:ue(Object.create(null),zu(e),zu(t??{})):t}function yg(e,t){if(!e)return t;if(!t)return e;const n=ue(Object.create(null),e);for(const r in t)n[r]=fe(e[r],t[r]);return n}function Tf(){return{app:null,config:{isNativeTag:Dh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vg=0;function Eg(e,t){return function(r,s=null){it(r)||(r=ue({},r)),s!=null&&!At(s)&&(s=null);const i=Tf(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:vg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:n_,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&it(d.install)?(a.add(d),d.install(f,...m)):it(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,v){if(!c){const b=f._ceVNode||ve(r,s);return b.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),e(b,d,v),c=!0,f._container=d,d.__vue_app__=f,go(b.component)}},onUnmount(d){l.push(d)},unmount(){c&&(qe(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=Qn;Qn=f;try{return d()}finally{Qn=m}}};return f}}let Qn=null;function Tg(e,t){if(pe){let n=pe.provides;const r=pe.parent&&pe.parent.provides;r===n&&(n=pe.provides=Object.create(r)),n[e]=t}}function ms(e,t,n=!1){const r=Lf();if(r||Qn){let s=Qn?Qn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&it(t)?t.call(r&&r.proxy):t}}function Ig(){return!!(Lf()||Qn)}const If={},wf=()=>Object.create(If),Af=e=>Object.getPrototypeOf(e)===If;function wg(e,t,n,r=!1){const s={},i=wf();e.propsDefaults=Object.create(null),bf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Fm(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Ag(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=pt(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let v=d[m];if(po(e.emitsOptions,v))continue;const b=t[v];if(c)if(yt(i,v))b!==i[v]&&(i[v]=b,f=!0);else{const V=Sn(v);s[V]=Aa(c,l,V,b,e,!1)}else b!==i[v]&&(i[v]=b,f=!0)}}}else{bf(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!yt(t,m)&&((d=Yn(m))===m||!yt(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=Aa(c,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!yt(t,m))&&(delete i[m],f=!0)}f&&Ze(e.attrs,"set","")}function bf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(cs(c))continue;const f=t[c];let d;s&&yt(s,d=Sn(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:po(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=pt(n),f=l||It;for(let d=0;d<i.length;d++){const m=i[d];n[m]=Aa(s,c,m,f[m],e,!yt(f,m))}}return a}function Aa(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=yt(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&it(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=$s(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Yn(n))&&(r=!0))}return r}const bg=new WeakMap;function Sf(e,t,n=!1){const r=n?bg:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!it(e)){const d=m=>{c=!0;const[v,b]=Sf(m,t,!0);ue(a,v),b&&l.push(...b)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return At(e)&&r.set(e,_r),_r;if(nt(i))for(let d=0;d<i.length;d++){const m=Sn(i[d]);Qu(m)&&(a[m]=It)}else if(i)for(const d in i){const m=Sn(d);if(Qu(m)){const v=i[d],b=a[m]=nt(v)||it(v)?{type:v}:ue({},v),V=b.type;let D=!1,F=!0;if(nt(V))for(let W=0;W<V.length;++W){const K=V[W],Q=it(K)&&K.name;if(Q==="Boolean"){D=!0;break}else Q==="String"&&(F=!1)}else D=it(V)&&V.name==="Boolean";b[0]=D,b[1]=F,(D||yt(b,"default"))&&l.push(m)}}const f=[a,l];return At(e)&&r.set(e,f),f}function Qu(e){return e[0]!=="$"&&!cs(e)}const fl=e=>e==="_"||e==="_ctx"||e==="$stable",dl=e=>nt(e)?e.map(Me):[Me(e)],Sg=(e,t,n)=>{if(t._n)return t;const r=ss((...s)=>dl(t(...s)),n);return r._c=!1,r},Rf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(fl(s))continue;const i=e[s];if(it(i))t[s]=Sg(s,i,r);else if(i!=null){const a=dl(i);t[s]=()=>a}}},Cf=(e,t)=>{const n=dl(t);e.slots.default=()=>n},Pf=(e,t,n)=>{for(const r in t)(n||!fl(r))&&(e[r]=t[r])},Rg=(e,t,n)=>{const r=e.slots=wf();if(e.vnode.shapeFlag&32){const s=t._;s?(Pf(r,t,n),n&&Fh(r,"_",s,!0)):Rf(t,r)}else t&&Cf(e,t)},Cg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=It;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Pf(s,t,n):(i=!t.$stable,Rf(t,s)),a=t}else t&&(Cf(e,t),a={default:1});if(i)for(const l in s)!fl(l)&&a[l]==null&&delete s[l]},_e=qg;function Pg(e){return Vg(e)}function Vg(e,t){const n=lo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:m,nextSibling:v,setScopeId:b=Fe,insertStaticContent:V}=e,D=(y,A,P,L=null,O=null,k=null,$=void 0,U=null,B=!!A.dynamicChildren)=>{if(y===A)return;y&&!ns(y,A)&&(L=Ge(y),Lt(y,O,k,!0),y=null),A.patchFlag===-2&&(B=!1,A.dynamicChildren=null);const{type:M,ref:Y,shapeFlag:q}=A;switch(M){case mo:F(y,A,P,L);break;case sn:W(y,A,P,L);break;case na:y==null&&K(A,P,L,$);break;case Ot:S(y,A,P,L,O,k,$,U,B);break;default:q&1?lt(y,A,P,L,O,k,$,U,B):q&6?E(y,A,P,L,O,k,$,U,B):(q&64||q&128)&&M.process(y,A,P,L,O,k,$,U,B,xe)}Y!=null&&O?ds(Y,y&&y.ref,k,A||y,!A):Y==null&&y&&y.ref!=null&&ds(y.ref,null,k,y,!0)},F=(y,A,P,L)=>{if(y==null)r(A.el=l(A.children),P,L);else{const O=A.el=y.el;A.children!==y.children&&f(O,A.children)}},W=(y,A,P,L)=>{y==null?r(A.el=c(A.children||""),P,L):A.el=y.el},K=(y,A,P,L)=>{[y.el,y.anchor]=V(y.children,A,P,L,y.el,y.anchor)},Q=({el:y,anchor:A},P,L)=>{let O;for(;y&&y!==A;)O=v(y),r(y,P,L),y=O;r(A,P,L)},z=({el:y,anchor:A})=>{let P;for(;y&&y!==A;)P=v(y),s(y),y=P;s(A)},lt=(y,A,P,L,O,k,$,U,B)=>{if(A.type==="svg"?$="svg":A.type==="math"&&($="mathml"),y==null)Et(A,P,L,O,k,$,U,B);else{const M=y.el&&y.el._isVueCE?y.el:null;try{M&&M._beginPatch(),_(y,A,O,k,$,U,B)}finally{M&&M._endPatch()}}},Et=(y,A,P,L,O,k,$,U)=>{let B,M;const{props:Y,shapeFlag:q,transition:X,dirs:et}=y;if(B=y.el=a(y.type,k,Y&&Y.is,Y),q&8?d(B,y.children):q&16&&g(y.children,B,null,L,O,ea(y,k),$,U),et&&$n(y,null,L,"created"),I(B,y,y.scopeId,$,L),Y){for(const at in Y)at!=="value"&&!cs(at)&&i(B,at,null,Y[at],k,L);"value"in Y&&i(B,"value",null,Y.value,k),(M=Y.onVnodeBeforeMount)&&Ne(M,L,y)}et&&$n(y,null,L,"beforeMount");const Z=Dg(O,X);Z&&X.beforeEnter(B),r(B,A,P),((M=Y&&Y.onVnodeMounted)||Z||et)&&_e(()=>{M&&Ne(M,L,y),Z&&X.enter(B),et&&$n(y,null,L,"mounted")},O)},I=(y,A,P,L,O)=>{if(P&&b(y,P),L)for(let k=0;k<L.length;k++)b(y,L[k]);if(O){let k=O.subTree;if(A===k||kf(k.type)&&(k.ssContent===A||k.ssFallback===A)){const $=O.vnode;I(y,$,$.scopeId,$.slotScopeIds,O.parent)}}},g=(y,A,P,L,O,k,$,U,B=0)=>{for(let M=B;M<y.length;M++){const Y=y[M]=U?gn(y[M]):Me(y[M]);D(null,Y,A,P,L,O,k,$,U)}},_=(y,A,P,L,O,k,$)=>{const U=A.el=y.el;let{patchFlag:B,dynamicChildren:M,dirs:Y}=A;B|=y.patchFlag&16;const q=y.props||It,X=A.props||It;let et;if(P&&qn(P,!1),(et=X.onVnodeBeforeUpdate)&&Ne(et,P,A,y),Y&&$n(A,y,P,"beforeUpdate"),P&&qn(P,!0),(q.innerHTML&&X.innerHTML==null||q.textContent&&X.textContent==null)&&d(U,""),M?T(y.dynamicChildren,M,U,P,L,ea(A,O),k):$||mt(y,A,U,null,P,L,ea(A,O),k,!1),B>0){if(B&16)w(U,q,X,P,O);else if(B&2&&q.class!==X.class&&i(U,"class",null,X.class,O),B&4&&i(U,"style",q.style,X.style,O),B&8){const Z=A.dynamicProps;for(let at=0;at<Z.length;at++){const ht=Z[at],Kt=q[ht],Wt=X[ht];(Wt!==Kt||ht==="value")&&i(U,ht,Kt,Wt,O,P)}}B&1&&y.children!==A.children&&d(U,A.children)}else!$&&M==null&&w(U,q,X,P,O);((et=X.onVnodeUpdated)||Y)&&_e(()=>{et&&Ne(et,P,A,y),Y&&$n(A,y,P,"updated")},L)},T=(y,A,P,L,O,k,$)=>{for(let U=0;U<A.length;U++){const B=y[U],M=A[U],Y=B.el&&(B.type===Ot||!ns(B,M)||B.shapeFlag&198)?m(B.el):P;D(B,M,Y,null,L,O,k,$,!0)}},w=(y,A,P,L,O)=>{if(A!==P){if(A!==It)for(const k in A)!cs(k)&&!(k in P)&&i(y,k,A[k],null,O,L);for(const k in P){if(cs(k))continue;const $=P[k],U=A[k];$!==U&&k!=="value"&&i(y,k,U,$,O,L)}"value"in P&&i(y,"value",A.value,P.value,O)}},S=(y,A,P,L,O,k,$,U,B)=>{const M=A.el=y?y.el:l(""),Y=A.anchor=y?y.anchor:l("");let{patchFlag:q,dynamicChildren:X,slotScopeIds:et}=A;et&&(U=U?U.concat(et):et),y==null?(r(M,P,L),r(Y,P,L),g(A.children||[],P,Y,O,k,$,U,B)):q>0&&q&64&&X&&y.dynamicChildren?(T(y.dynamicChildren,X,P,O,k,$,U),(A.key!=null||O&&A===O.subTree)&&Vf(y,A,!0)):mt(y,A,P,Y,O,k,$,U,B)},E=(y,A,P,L,O,k,$,U,B)=>{A.slotScopeIds=U,y==null?A.shapeFlag&512?O.ctx.activate(A,P,L,$,B):ce(A,P,L,O,k,$,B):De(y,A,B)},ce=(y,A,P,L,O,k,$)=>{const U=y.component=Xg(y,L,O);if(pf(y)&&(U.ctx.renderer=xe),Jg(U,!1,$),U.asyncDep){if(O&&O.registerDep(U,Vt,$),!y.el){const B=U.subTree=ve(sn);W(null,B,A,P),y.placeholder=B.el}}else Vt(U,y,A,P,O,k,$)},De=(y,A,P)=>{const L=A.component=y.component;if(jg(y,A,P))if(L.asyncDep&&!L.asyncResolved){ot(L,A,P);return}else L.next=A,L.update();else A.el=y.el,L.vnode=A},Vt=(y,A,P,L,O,k,$)=>{const U=()=>{if(y.isMounted){let{next:q,bu:X,u:et,parent:Z,vnode:at}=y;{const te=Df(y);if(te){q&&(q.el=at.el,ot(y,q,$)),te.asyncDep.then(()=>{y.isUnmounted||U()});return}}let ht=q,Kt;qn(y,!1),q?(q.el=at.el,ot(y,q,$)):q=at,X&&wi(X),(Kt=q.props&&q.props.onVnodeBeforeUpdate)&&Ne(Kt,Z,q,at),qn(y,!0);const Wt=Ju(y),Ee=y.subTree;y.subTree=Wt,D(Ee,Wt,m(Ee.el),Ge(Ee),y,O,k),q.el=Wt.el,ht===null&&$g(y,Wt.el),et&&_e(et,O),(Kt=q.props&&q.props.onVnodeUpdated)&&_e(()=>Ne(Kt,Z,q,at),O)}else{let q;const{el:X,props:et}=A,{bm:Z,m:at,parent:ht,root:Kt,type:Wt}=y,Ee=Er(A);qn(y,!1),Z&&wi(Z),!Ee&&(q=et&&et.onVnodeBeforeMount)&&Ne(q,ht,A),qn(y,!0);{Kt.ce&&Kt.ce._def.shadowRoot!==!1&&Kt.ce._injectChildStyle(Wt);const te=y.subTree=Ju(y);D(null,te,P,L,y,O,k),A.el=te.el}if(at&&_e(at,O),!Ee&&(q=et&&et.onVnodeMounted)){const te=A;_e(()=>Ne(q,ht,te),O)}(A.shapeFlag&256||ht&&Er(ht.vnode)&&ht.vnode.shapeFlag&256)&&y.a&&_e(y.a,O),y.isMounted=!0,A=P=L=null}};y.scope.on();const B=y.effect=new Hh(U);y.scope.off();const M=y.update=B.run.bind(B),Y=y.job=B.runIfDirty.bind(B);Y.i=y,Y.id=y.uid,B.scheduler=()=>cl(Y),qn(y,!0),M()},ot=(y,A,P)=>{A.component=y;const L=y.vnode.props;y.vnode=A,y.next=null,Ag(y,A.props,L,P),Cg(y,A.children,P),nn(),qu(y),rn()},mt=(y,A,P,L,O,k,$,U,B=!1)=>{const M=y&&y.children,Y=y?y.shapeFlag:0,q=A.children,{patchFlag:X,shapeFlag:et}=A;if(X>0){if(X&128){kn(M,q,P,L,O,k,$,U,B);return}else if(X&256){Se(M,q,P,L,O,k,$,U,B);return}}et&8?(Y&16&&Fn(M,O,k),q!==M&&d(P,q)):Y&16?et&16?kn(M,q,P,L,O,k,$,U,B):Fn(M,O,k,!0):(Y&8&&d(P,""),et&16&&g(q,P,L,O,k,$,U,B))},Se=(y,A,P,L,O,k,$,U,B)=>{y=y||_r,A=A||_r;const M=y.length,Y=A.length,q=Math.min(M,Y);let X;for(X=0;X<q;X++){const et=A[X]=B?gn(A[X]):Me(A[X]);D(y[X],et,P,null,O,k,$,U,B)}M>Y?Fn(y,O,k,!0,!1,q):g(A,P,L,O,k,$,U,B,q)},kn=(y,A,P,L,O,k,$,U,B)=>{let M=0;const Y=A.length;let q=y.length-1,X=Y-1;for(;M<=q&&M<=X;){const et=y[M],Z=A[M]=B?gn(A[M]):Me(A[M]);if(ns(et,Z))D(et,Z,P,null,O,k,$,U,B);else break;M++}for(;M<=q&&M<=X;){const et=y[q],Z=A[X]=B?gn(A[X]):Me(A[X]);if(ns(et,Z))D(et,Z,P,null,O,k,$,U,B);else break;q--,X--}if(M>q){if(M<=X){const et=X+1,Z=et<Y?A[et].el:L;for(;M<=X;)D(null,A[M]=B?gn(A[M]):Me(A[M]),P,Z,O,k,$,U,B),M++}}else if(M>X)for(;M<=q;)Lt(y[M],O,k,!0),M++;else{const et=M,Z=M,at=new Map;for(M=Z;M<=X;M++){const Gt=A[M]=B?gn(A[M]):Me(A[M]);Gt.key!=null&&at.set(Gt.key,M)}let ht,Kt=0;const Wt=X-Z+1;let Ee=!1,te=0;const cn=new Array(Wt);for(M=0;M<Wt;M++)cn[M]=0;for(M=et;M<=q;M++){const Gt=y[M];if(Kt>=Wt){Lt(Gt,O,k,!0);continue}let Te;if(Gt.key!=null)Te=at.get(Gt.key);else for(ht=Z;ht<=X;ht++)if(cn[ht-Z]===0&&ns(Gt,A[ht])){Te=ht;break}Te===void 0?Lt(Gt,O,k,!0):(cn[Te-Z]=M+1,Te>=te?te=Te:Ee=!0,D(Gt,A[Te],P,null,O,k,$,U,B),Kt++)}const jr=Ee?xg(cn):_r;for(ht=jr.length-1,M=Wt-1;M>=0;M--){const Gt=Z+M,Te=A[Gt],Qs=A[Gt+1],sr=Gt+1<Y?Qs.el||Qs.placeholder:L;cn[M]===0?D(null,Te,P,sr,O,k,$,U,B):Ee&&(ht<0||M!==jr[ht]?We(Te,P,sr,2):ht--)}}},We=(y,A,P,L,O=null)=>{const{el:k,type:$,transition:U,children:B,shapeFlag:M}=y;if(M&6){We(y.component.subTree,A,P,L);return}if(M&128){y.suspense.move(A,P,L);return}if(M&64){$.move(y,A,P,xe);return}if($===Ot){r(k,A,P);for(let q=0;q<B.length;q++)We(B[q],A,P,L);r(y.anchor,A,P);return}if($===na){Q(y,A,P);return}if(L!==2&&M&1&&U)if(L===0)U.beforeEnter(k),r(k,A,P),_e(()=>U.enter(k),O);else{const{leave:q,delayLeave:X,afterLeave:et}=U,Z=()=>{y.ctx.isUnmounted?s(k):r(k,A,P)},at=()=>{k._isLeaving&&k[tg](!0),q(k,()=>{Z(),et&&et()})};X?X(k,Z,at):at()}else r(k,A,P)},Lt=(y,A,P,L=!1,O=!1)=>{const{type:k,props:$,ref:U,children:B,dynamicChildren:M,shapeFlag:Y,patchFlag:q,dirs:X,cacheIndex:et}=y;if(q===-2&&(O=!1),U!=null&&(nn(),ds(U,null,P,y,!0),rn()),et!=null&&(A.renderCache[et]=void 0),Y&256){A.ctx.deactivate(y);return}const Z=Y&1&&X,at=!Er(y);let ht;if(at&&(ht=$&&$.onVnodeBeforeUnmount)&&Ne(ht,A,y),Y&6)Mn(y.component,P,L);else{if(Y&128){y.suspense.unmount(P,L);return}Z&&$n(y,null,A,"beforeUnmount"),Y&64?y.type.remove(y,A,P,xe,L):M&&!M.hasOnce&&(k!==Ot||q>0&&q&64)?Fn(M,A,P,!1,!0):(k===Ot&&q&384||!O&&Y&16)&&Fn(B,A,P),L&&Bt(y)}(at&&(ht=$&&$.onVnodeUnmounted)||Z)&&_e(()=>{ht&&Ne(ht,A,y),Z&&$n(y,null,A,"unmounted")},P)},Bt=y=>{const{type:A,el:P,anchor:L,transition:O}=y;if(A===Ot){Oo(P,L);return}if(A===na){z(y);return}const k=()=>{s(P),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(y.shapeFlag&1&&O&&!O.persisted){const{leave:$,delayLeave:U}=O,B=()=>$(P,k);U?U(y.el,k,B):B()}else k()},Oo=(y,A)=>{let P;for(;y!==A;)P=v(y),s(y),y=P;s(A)},Mn=(y,A,P)=>{const{bum:L,scope:O,job:k,subTree:$,um:U,m:B,a:M}=y;Xu(B),Xu(M),L&&wi(L),O.stop(),k&&(k.flags|=8,Lt($,y,A,P)),U&&_e(U,A),_e(()=>{y.isUnmounted=!0},A)},Fn=(y,A,P,L=!1,O=!1,k=0)=>{for(let $=k;$<y.length;$++)Lt(y[$],A,P,L,O)},Ge=y=>{if(y.shapeFlag&6)return Ge(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const A=v(y.anchor||y.el),P=A&&A[Ym];return P?v(P):A};let Br=!1;const Gs=(y,A,P)=>{y==null?A._vnode&&Lt(A._vnode,null,null,!0):D(A._vnode||null,y,A,null,null,null,P),A._vnode=y,Br||(Br=!0,qu(),cf(),Br=!1)},xe={p:D,um:Lt,m:We,r:Bt,mt:ce,mc:g,pc:mt,pbc:T,n:Ge,o:e};return{render:Gs,hydrate:void 0,createApp:Eg(Gs)}}function ea({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function qn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Vf(e,t,n=!1){const r=e.children,s=t.children;if(nt(r)&&nt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=gn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Vf(a,l)),l.type===mo&&l.patchFlag!==-1&&(l.el=a.el),l.type===sn&&!l.el&&(l.el=a.el)}}function xg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Df(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Df(t)}function Xu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ng=Symbol.for("v-scx"),Og=()=>ms(Ng);function bi(e,t,n){return xf(e,t,n)}function xf(e,t,n=It){const{immediate:r,deep:s,flush:i,once:a}=n,l=ue({},n),c=t&&r||!t&&i!=="post";let f;if(Ps){if(i==="sync"){const b=Og();f=b.__watcherHandles||(b.__watcherHandles=[])}else if(!c){const b=()=>{};return b.stop=Fe,b.resume=Fe,b.pause=Fe,b}}const d=pe;l.call=(b,V,D)=>qe(b,d,V,D);let m=!1;i==="post"?l.scheduler=b=>{_e(b,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(b,V)=>{V?b():cl(b)}),l.augmentJob=b=>{t&&(b.flags|=4),m&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const v=Gm(e,t,l);return Ps&&(f?f.push(v):c&&v()),v}function kg(e,t,n){const r=this.proxy,s=Ft(e)?e.includes(".")?Nf(r,e):()=>r[e]:e.bind(r,r);let i;it(t)?i=t:(i=t.handler,n=t);const a=$s(this),l=xf(s,i.bind(r),n);return a(),l}function Nf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Mg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Sn(t)}Modifiers`]||e[`${Yn(t)}Modifiers`];function Fg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||It;let s=n;const i=t.startsWith("update:"),a=i&&Mg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Ft(d)?d.trim():d)),a.number&&(s=n.map(tl)));let l,c=r[l=Qo(t)]||r[l=Qo(Sn(t))];!c&&i&&(c=r[l=Qo(Yn(t))]),c&&qe(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,qe(f,e,6,s)}}const Lg=new WeakMap;function Of(e,t,n=!1){const r=n?Lg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!it(e)){const c=f=>{const d=Of(f,t,!0);d&&(l=!0,ue(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(At(e)&&r.set(e,null),null):(nt(i)?i.forEach(c=>a[c]=null):ue(a,i),At(e)&&r.set(e,a),a)}function po(e,t){return!e||!oo(t)?!1:(t=t.slice(2).replace(/Once$/,""),yt(e,t[0].toLowerCase()+t.slice(1))||yt(e,Yn(t))||yt(e,t))}function Ju(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:m,data:v,setupState:b,ctx:V,inheritAttrs:D}=e,F=Bi(e);let W,K;try{if(n.shapeFlag&4){const z=s||r,lt=z;W=Me(f.call(lt,z,d,m,b,v,V)),K=l}else{const z=t;W=Me(z.length>1?z(m,{attrs:l,slots:a,emit:c}):z(m,null)),K=t.props?l:Bg(l)}}catch(z){gs.length=0,ho(z,e,1),W=ve(sn)}let Q=W;if(K&&D!==!1){const z=Object.keys(K),{shapeFlag:lt}=Q;z.length&&lt&7&&(i&&z.some(Ja)&&(K=Ug(K,i)),Q=Sr(Q,K,!1,!0))}return n.dirs&&(Q=Sr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&hl(Q,n.transition),W=Q,Bi(F),W}const Bg=e=>{let t;for(const n in e)(n==="class"||n==="style"||oo(n))&&((t||(t={}))[n]=e[n]);return t},Ug=(e,t)=>{const n={};for(const r in e)(!Ja(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function jg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Yu(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const v=d[m];if(a[v]!==r[v]&&!po(f,v))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Yu(r,a,f):!0:!!a;return!1}function Yu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!po(n,i))return!0}return!1}function $g({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const kf=e=>e.__isSuspense;function qg(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):Jm(e)}const Ot=Symbol.for("v-fgt"),mo=Symbol.for("v-txt"),sn=Symbol.for("v-cmt"),na=Symbol.for("v-stc"),gs=[];let ye=null;function _t(e=!1){gs.push(ye=e?null:[])}function Hg(){gs.pop(),ye=gs[gs.length-1]||null}let Cs=1;function Zu(e,t=!1){Cs+=e,e<0&&ye&&t&&(ye.hasOnce=!0)}function Mf(e){return e.dynamicChildren=Cs>0?ye||_r:null,Hg(),Cs>0&&ye&&ye.push(e),e}function Pt(e,t,n,r,s,i){return Mf(Ut(e,t,n,r,s,i,!0))}function yn(e,t,n,r,s){return Mf(ve(e,t,n,r,s,!0))}function pl(e){return e?e.__v_isVNode===!0:!1}function ns(e,t){return e.type===t.type&&e.key===t.key}const Ff=({key:e})=>e??null,Si=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ft(e)||wt(e)||it(e)?{i:le,r:e,k:t,f:!!n}:e:null);function Ut(e,t=null,n=null,r=0,s=null,i=e===Ot?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ff(t),ref:t&&Si(t),scopeId:ff,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:le};return l?(ml(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Ft(n)?8:16),Cs>0&&!a&&ye&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&ye.push(c),c}const ve=zg;function zg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===fg)&&(e=sn),pl(e)){const l=Sr(e,t,!0);return n&&ml(l,n),Cs>0&&!i&&ye&&(l.shapeFlag&6?ye[ye.indexOf(e)]=l:ye.push(l)),l.patchFlag=-2,l}if(e_(e)&&(e=e.__vccOpts),t){t=Kg(t);let{class:l,style:c}=t;l&&!Ft(l)&&(t.class=el(l)),At(c)&&(ll(c)&&!nt(c)&&(c=ue({},c)),t.style=Nr(c))}const a=Ft(e)?1:kf(e)?128:Zm(e)?64:At(e)?4:it(e)?2:0;return Ut(e,t,n,r,s,a,i,!0)}function Kg(e){return e?ll(e)||Af(e)?ue({},e):e:null}function Sr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?Wg(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Ff(f),ref:t&&t.ref?n&&i?nt(i)?i.concat(Si(t)):[i,Si(t)]:Si(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ot?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Sr(e.ssContent),ssFallback:e.ssFallback&&Sr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&hl(d,c.clone(d)),d}function os(e=" ",t=0){return ve(mo,null,e,t)}function _s(e="",t=!1){return t?(_t(),yn(sn,null,e)):ve(sn,null,e)}function Me(e){return e==null||typeof e=="boolean"?ve(sn):nt(e)?ve(Ot,null,e.slice()):pl(e)?gn(e):ve(mo,null,String(e))}function gn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Sr(e)}function ml(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(nt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ml(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Af(t)?t._ctx=le:s===3&&le&&(le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:le},n=32):(t=String(t),r&64?(n=16,t=[os(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wg(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=el([t.class,r.class]));else if(s==="style")t.style=Nr([t.style,r.style]);else if(oo(s)){const i=t[s],a=r[s];a&&i!==a&&!(nt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Ne(e,t,n,r=null){qe(e,t,7,[n,r])}const Gg=Tf();let Qg=0;function Xg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Gg,i={uid:Qg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sf(r,s),emitsOptions:Of(r,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Fg.bind(null,i),e.ce&&e.ce(i),i}let pe=null;const Lf=()=>pe||le;let $i,ba;{const e=lo(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};$i=t("__VUE_INSTANCE_SETTERS__",n=>pe=n),ba=t("__VUE_SSR_SETTERS__",n=>Ps=n)}const $s=e=>{const t=pe;return $i(e),e.scope.on(),()=>{e.scope.off(),$i(t)}},tc=()=>{pe&&pe.scope.off(),$i(null)};function Bf(e){return e.vnode.shapeFlag&4}let Ps=!1;function Jg(e,t=!1,n=!1){t&&ba(t);const{props:r,children:s}=e.vnode,i=Bf(e);wg(e,r,i,t),Rg(e,s,n||t);const a=i?Yg(e,t):void 0;return t&&ba(!1),a}function Yg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,dg);const{setup:r}=n;if(r){nn();const s=e.setupContext=r.length>1?t_(e):null,i=$s(e),a=Us(r,e,0,[e.props,s]),l=Nh(a);if(rn(),i(),(l||e.sp)&&!Er(e)&&df(e),l){if(a.then(tc,tc),t)return a.then(c=>{ec(e,c)}).catch(c=>{ho(c,e,0)});e.asyncDep=a}else ec(e,a)}else Uf(e)}function ec(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:At(t)&&(e.setupState=sf(t)),Uf(e)}function Uf(e,t,n){const r=e.type;e.render||(e.render=r.render||Fe);{const s=$s(e);nn();try{pg(e)}finally{rn(),s()}}}const Zg={get(e,t){return oe(e,"get",""),e[t]}};function t_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Zg),slots:e.slots,emit:e.emit,expose:t}}function go(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(sf(ul(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ps)return ps[n](e)},has(t,n){return n in t||n in ps}})):e.proxy}function e_(e){return it(e)&&"__vccOpts"in e}const Ke=(e,t)=>Km(e,t,Ps),n_="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sa;const nc=typeof window<"u"&&window.trustedTypes;if(nc)try{Sa=nc.createPolicy("vue",{createHTML:e=>e})}catch{}const jf=Sa?e=>Sa.createHTML(e):e=>e,r_="http://www.w3.org/2000/svg",s_="http://www.w3.org/1998/Math/MathML",Ye=typeof document<"u"?document:null,rc=Ye&&Ye.createElement("template"),i_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Ye.createElementNS(r_,e):t==="mathml"?Ye.createElementNS(s_,e):n?Ye.createElement(e,{is:n}):Ye.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Ye.createTextNode(e),createComment:e=>Ye.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ye.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{rc.innerHTML=jf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=rc.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},o_=Symbol("_vtc");function a_(e,t,n){const r=e[o_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const sc=Symbol("_vod"),l_=Symbol("_vsh"),u_=Symbol(""),c_=/(?:^|;)\s*display\s*:/;function h_(e,t,n){const r=e.style,s=Ft(n);let i=!1;if(n&&!s){if(t)if(Ft(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ri(r,l,"")}else for(const a in t)n[a]==null&&Ri(r,a,"");for(const a in n)a==="display"&&(i=!0),Ri(r,a,n[a])}else if(s){if(t!==n){const a=r[u_];a&&(n+=";"+a),r.cssText=n,i=c_.test(n)}}else t&&e.removeAttribute("style");sc in e&&(e[sc]=i?r.display:"",e[l_]&&(r.display="none"))}const ic=/\s*!important$/;function Ri(e,t,n){if(nt(n))n.forEach(r=>Ri(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=f_(e,t);ic.test(n)?e.setProperty(Yn(r),n.replace(ic,""),"important"):e[r]=n}}const oc=["Webkit","Moz","ms"],ra={};function f_(e,t){const n=ra[t];if(n)return n;let r=Sn(t);if(r!=="filter"&&r in e)return ra[t]=r;r=Mh(r);for(let s=0;s<oc.length;s++){const i=oc[s]+r;if(i in e)return ra[t]=i}return t}const ac="http://www.w3.org/1999/xlink";function lc(e,t,n,r,s,i=mm(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ac,t.slice(6,t.length)):e.setAttributeNS(ac,t,n):n==null||i&&!Lh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Ve(n)?String(n):n)}function uc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?jf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Lh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Kn(e,t,n,r){e.addEventListener(t,n,r)}function d_(e,t,n,r){e.removeEventListener(t,n,r)}const cc=Symbol("_vei");function p_(e,t,n,r,s=null){const i=e[cc]||(e[cc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=m_(t);if(r){const f=i[t]=y_(r,s);Kn(e,l,f,c)}else a&&(d_(e,l,a,c),i[t]=void 0)}}const hc=/(?:Once|Passive|Capture)$/;function m_(e){let t;if(hc.test(e)){t={};let r;for(;r=e.match(hc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yn(e.slice(2)),t]}let sa=0;const g_=Promise.resolve(),__=()=>sa||(g_.then(()=>sa=0),sa=Date.now());function y_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;qe(v_(r,n.value),t,5,[r])};return n.value=e,n.attached=__(),n}function v_(e,t){if(nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const fc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,E_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?a_(e,r,a):t==="style"?h_(e,n,r):oo(t)?Ja(t)||p_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):T_(e,t,r,a))?(uc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&lc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ft(r))?uc(e,Sn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),lc(e,t,r,a))};function T_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&fc(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return fc(t)&&Ft(n)?!1:t in e}const qi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?n=>wi(t,n):t};function I_(e){e.target.composing=!0}function dc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Tr=Symbol("_assign");function pc(e,t,n){return t&&(e=e.trim()),n&&(e=tl(e)),e}const w_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Tr]=qi(s);const i=r||s.props&&s.props.type==="number";Kn(e,t?"change":"input",a=>{a.target.composing||e[Tr](pc(e.value,n,i))}),(n||i)&&Kn(e,"change",()=>{e.value=pc(e.value,n,i)}),t||(Kn(e,"compositionstart",I_),Kn(e,"compositionend",dc),Kn(e,"change",dc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Tr]=qi(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?tl(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},pi={created(e,{value:t},n){e.checked=Oi(t,n.props.value),e[Tr]=qi(n),Kn(e,"change",()=>{e[Tr](A_(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[Tr]=qi(r),t!==n&&(e.checked=Oi(t,r.props.value))}};function A_(e){return"_value"in e?e._value:e.value}const b_=ue({patchProp:E_},i_);let mc;function S_(){return mc||(mc=Pg(b_))}const R_=((...e)=>{const t=S_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=P_(r);if(!s)return;const i=t._component;!it(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,C_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function C_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function P_(e){return Ft(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let $f;const _o=e=>$f=e,qf=Symbol();function Ra(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ys;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ys||(ys={}));function V_(){const e=$h(!0),t=e.run(()=>Ss({}));let n=[],r=[];const s=ul({install(i){_o(s),s._a=i,i.provide(qf,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Hf=()=>{};function gc(e,t,n,r=Hf){e.add(t);const s=()=>{e.delete(t)&&r()};return!n&&qh()&&_m(s),s}function cr(e,...t){e.forEach(n=>{n(...t)})}const D_=e=>e(),_c=Symbol(),ia=Symbol();function Ca(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Ra(s)&&Ra(r)&&e.hasOwnProperty(n)&&!wt(r)&&!en(r)?e[n]=Ca(s,r):e[n]=r}return e}const x_=Symbol();function N_(e){return!Ra(e)||!Object.prototype.hasOwnProperty.call(e,x_)}const{assign:pn}=Object;function O_(e){return!!(wt(e)&&e.effect)}function k_(e,t,n,r){const{state:s,actions:i,getters:a}=t,l=n.state.value[e];let c;function f(){l||(n.state.value[e]=s?s():{});const d=jm(n.state.value[e]);return pn(d,i,Object.keys(a||{}).reduce((m,v)=>(m[v]=ul(Ke(()=>{_o(n);const b=n._s.get(e);return a[v].call(b,b)})),m),{}))}return c=zf(e,f,t,n,r,!0),c}function zf(e,t,n={},r,s,i){let a;const l=pn({actions:{}},n),c={deep:!0};let f,d,m=new Set,v=new Set,b;const V=r.state.value[e];!i&&!V&&(r.state.value[e]={}),Ss({});let D;function F(g){let _;f=d=!1,typeof g=="function"?(g(r.state.value[e]),_={type:ys.patchFunction,storeId:e,events:b}):(Ca(r.state.value[e],g),_={type:ys.patchObject,payload:g,storeId:e,events:b});const T=D=Symbol();lf().then(()=>{D===T&&(f=!0)}),d=!0,cr(m,_,r.state.value[e])}const W=i?function(){const{state:_}=n,T=_?_():{};this.$patch(w=>{pn(w,T)})}:Hf;function K(){a.stop(),m.clear(),v.clear(),r._s.delete(e)}const Q=(g,_="")=>{if(_c in g)return g[ia]=_,g;const T=function(){_o(r);const w=Array.from(arguments),S=new Set,E=new Set;function ce(ot){S.add(ot)}function De(ot){E.add(ot)}cr(v,{args:w,name:T[ia],store:lt,after:ce,onError:De});let Vt;try{Vt=g.apply(this&&this.$id===e?this:lt,w)}catch(ot){throw cr(E,ot),ot}return Vt instanceof Promise?Vt.then(ot=>(cr(S,ot),ot)).catch(ot=>(cr(E,ot),Promise.reject(ot))):(cr(S,Vt),Vt)};return T[_c]=!0,T[ia]=_,T},z={_p:r,$id:e,$onAction:gc.bind(null,v),$patch:F,$reset:W,$subscribe(g,_={}){const T=gc(m,g,_.detached,()=>w()),w=a.run(()=>bi(()=>r.state.value[e],S=>{(_.flush==="sync"?d:f)&&g({storeId:e,type:ys.direct,events:b},S)},pn({},c,_)));return T},$dispose:K},lt=co(z);r._s.set(e,lt);const I=(r._a&&r._a.runWithContext||D_)(()=>r._e.run(()=>(a=$h()).run(()=>t({action:Q}))));for(const g in I){const _=I[g];if(wt(_)&&!O_(_)||en(_))i||(V&&N_(_)&&(wt(_)?_.value=V[g]:Ca(_,V[g])),r.state.value[e][g]=_);else if(typeof _=="function"){const T=Q(_,g);I[g]=T,l.actions[g]=_}}return pn(lt,I),pn(pt(lt),I),Object.defineProperty(lt,"$state",{get:()=>r.state.value[e],set:g=>{F(_=>{pn(_,g)})}}),r._p.forEach(g=>{pn(lt,a.run(()=>g({store:lt,app:r._a,pinia:r,options:l})))}),V&&i&&n.hydrate&&n.hydrate(lt.$state,V),f=!0,d=!0,lt}/*! #__NO_SIDE_EFFECTS__ */function M_(e,t,n){let r;const s=typeof t=="function";r=s?n:t;function i(a,l){const c=Ig();return a=a||(c?ms(qf,null):null),a&&_o(a),a=$f,a._s.has(e)||(s?zf(e,t,r,a):k_(e,r,a)),a._s.get(e)}return i.$id=e,i}function F_(e){const t=pt(e),n={};for(const r in t){const s=t[r];s.effect?n[r]=Ke({get:()=>e[r],set(i){e[r]=i}}):(wt(s)||en(s))&&(n[r]=Hm(e,r))}return n}function L_(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n===void 0||n[t[r]]===void 0)return;if(n===null||n[t[r]]===null)return null;n=n[t[r]]}return n}function gl(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=gl(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function Kf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return gl(e,Kf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Wf(e,t){return t.map(n=>n.split(".")).map(n=>[n,L_(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>gl(n,r[1],r[0]),{})}function Gf(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>Kf(n,r),e)}function yc(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a,beforeHydrate:l,afterHydrate:c},f,d=!0){try{d&&(l==null||l(f));const m=t.getItem(r);if(m){const v=n.deserialize(m),b=i?Wf(v,i):v,V=a?Gf(b,a):b;e.$patch(V)}d&&(c==null||c(f))}catch(m){s&&console.error("[pinia-plugin-persistedstate]",m)}}function vc(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a}){try{const l=i?Wf(e,i):e,c=a?Gf(l,a):l,f=n.serialize(c);t.setItem(r,f)}catch(l){s&&console.error("[pinia-plugin-persistedstate]",l)}}function B_(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function U_(e,t,n){const{pinia:r,store:s,options:{persist:i=n}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(s.$id in r.state.value)){const l=r._s.get(s.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(t);s.$hydrate=({runHooks:l=!0}={})=>{a.forEach(c=>{yc(s,c,e,l)})},s.$persist=()=>{a.forEach(l=>{vc(s.$state,l)})},a.forEach(l=>{yc(s,l,e),s.$subscribe((c,f)=>vc(f,l),{detached:!0})})}function j_(e={}){return function(t){U_(t,n=>{const r=B_(n.key,t.store.$id);return{key:(e.key?e.key:s=>s)(r),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>JSON.parse(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate??e.beforeHydrate,afterHydrate:n.afterHydrate??e.afterHydrate,pick:n.pick,omit:n.omit}},e.auto??!1)}}var $_=j_();const Zn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},q_={},H_={class:"carafe"};function z_(e,t){return _t(),Pt("div",H_,[Ai(e.$slots,"top",{},void 0,!0),Ai(e.$slots,"mid",{},void 0,!0),Ai(e.$slots,"bottom",{},void 0,!0)])}const K_=Zn(q_,[["render",z_],["__scopeId","data-v-8709b092"]]),W_={},G_={class:"mug"};function Q_(e,t){return _t(),Pt("div",G_,[Ai(e.$slots,"default")])}const X_=Zn(W_,[["render",Q_]]),Ec=["Hot","Cold"],J_=()=>{};var Tc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Y_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Xf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|f>>6,b=f&63;c||(b=64,a||(v=64)),r.push(n[d],n[m],n[v],n[b])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Y_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new Z_;const v=i<<2|l>>4;if(r.push(v),f!==64){const b=l<<4&240|f>>2;if(r.push(b),m!==64){const V=f<<6&192|m;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Z_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ty=function(e){const t=Qf(e);return Xf.encodeByteArray(t,!0)},Hi=function(e){return ty(e).replace(/\./g,"")},ey=function(e){try{return Xf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=()=>ny().__FIREBASE_DEFAULTS__,sy=()=>{if(typeof process>"u"||typeof Tc>"u")return;const e=Tc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},iy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ey(e[1]);return t&&JSON.parse(t)},_l=()=>{try{return J_()||ry()||sy()||iy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},oy=e=>{var t,n;return(n=(t=_l())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},ay=e=>{const t=oy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Jf=()=>{var e;return(e=_l())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uy(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Hi(JSON.stringify(n)),Hi(JSON.stringify(a)),""].join(".")}const vs={};function hy(){const e={prod:[],emulator:[]};for(const t of Object.keys(vs))vs[t]?e.emulator.push(t):e.prod.push(t);return e}function fy(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Ic=!1;function dy(e,t){if(typeof window>"u"||typeof document>"u"||!yl(window.location.host)||vs[e]===t||vs[e]||Ic)return;vs[e]=t;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",i=hy().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Ic=!0,a()},v}function d(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=fy(r),b=n("text"),V=document.getElementById(b)||document.createElement("span"),D=n("learnmore"),F=document.getElementById(D)||document.createElement("a"),W=n("preprendIcon"),K=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const Q=v.element;l(Q),d(F,D);const z=f();c(K,W),Q.append(K,V,F,z),document.body.appendChild(Q)}i?(V.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function my(){var e;const t=(e=_l())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gy(){return!my()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _y(){try{return typeof indexedDB=="object"}catch{return!1}}function yy(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="FirebaseError";class Or extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=vy,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yf.prototype.create)}}class Yf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Ey(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Or(s,l,r)}}function Ey(e,t){return e.replace(Ty,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Ty=/\{\$([^}]+)}/g;function zi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(wc(i)&&wc(a)){if(!zi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(e){return e&&e._delegate?e._delegate:e}class Ds{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new ly;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ay(t))try{this.getOrInitializeService({instanceIdentifier:zn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=zn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zn){return this.instances.has(t)}getOptions(t=zn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wy(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=zn){return this.component?this.component.multipleInstances?t:zn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wy(e){return e===zn?void 0:e}function Ay(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Iy(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(dt||(dt={}));const Sy={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Ry=dt.INFO,Cy={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},Py=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Cy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Zf{constructor(t){this.name=t,this._logLevel=Ry,this._logHandler=Py,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Sy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}const Vy=(e,t)=>t.some(n=>e instanceof n);let Ac,bc;function Dy(){return Ac||(Ac=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xy(){return bc||(bc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const td=new WeakMap,Pa=new WeakMap,ed=new WeakMap,oa=new WeakMap,vl=new WeakMap;function Ny(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(Tn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&td.set(n,e)}).catch(()=>{}),vl.set(t,e),t}function Oy(e){if(Pa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Pa.set(e,t)}let Va={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Pa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ed.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function ky(e){Va=e(Va)}function My(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(aa(this),t,...n);return ed.set(r,t.sort?t.sort():[t]),Tn(r)}:xy().includes(e)?function(...t){return e.apply(aa(this),t),Tn(td.get(this))}:function(...t){return Tn(e.apply(aa(this),t))}}function Fy(e){return typeof e=="function"?My(e):(e instanceof IDBTransaction&&Oy(e),Vy(e,Dy())?new Proxy(e,Va):e)}function Tn(e){if(e instanceof IDBRequest)return Ny(e);if(oa.has(e))return oa.get(e);const t=Fy(e);return t!==e&&(oa.set(e,t),vl.set(t,e)),t}const aa=e=>vl.get(e);function Ly(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=Tn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Tn(a.result),c.oldVersion,c.newVersion,Tn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const By=["get","getKey","getAll","getAllKeys","count"],Uy=["put","add","delete","clear"],la=new Map;function Sc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(la.get(t))return la.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Uy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||By.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return la.set(t,i),i}ky(e=>({...e,get:(t,n,r)=>Sc(t,n)||e.get(t,n,r),has:(t,n)=>!!Sc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($y(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $y(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Da="@firebase/app",Rc="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on=new Zf("@firebase/app"),qy="@firebase/app-compat",Hy="@firebase/analytics-compat",zy="@firebase/analytics",Ky="@firebase/app-check-compat",Wy="@firebase/app-check",Gy="@firebase/auth",Qy="@firebase/auth-compat",Xy="@firebase/database",Jy="@firebase/data-connect",Yy="@firebase/database-compat",Zy="@firebase/functions",tv="@firebase/functions-compat",ev="@firebase/installations",nv="@firebase/installations-compat",rv="@firebase/messaging",sv="@firebase/messaging-compat",iv="@firebase/performance",ov="@firebase/performance-compat",av="@firebase/remote-config",lv="@firebase/remote-config-compat",uv="@firebase/storage",cv="@firebase/storage-compat",hv="@firebase/firestore",fv="@firebase/ai",dv="@firebase/firestore-compat",pv="firebase",mv="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]",gv={[Da]:"fire-core",[qy]:"fire-core-compat",[zy]:"fire-analytics",[Hy]:"fire-analytics-compat",[Wy]:"fire-app-check",[Ky]:"fire-app-check-compat",[Gy]:"fire-auth",[Qy]:"fire-auth-compat",[Xy]:"fire-rtdb",[Jy]:"fire-data-connect",[Yy]:"fire-rtdb-compat",[Zy]:"fire-fn",[tv]:"fire-fn-compat",[ev]:"fire-iid",[nv]:"fire-iid-compat",[rv]:"fire-fcm",[sv]:"fire-fcm-compat",[iv]:"fire-perf",[ov]:"fire-perf-compat",[av]:"fire-rc",[lv]:"fire-rc-compat",[uv]:"fire-gcs",[cv]:"fire-gcs-compat",[hv]:"fire-fst",[dv]:"fire-fst-compat",[fv]:"fire-vertex","fire-js":"fire-js",[pv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Map,_v=new Map,Na=new Map;function Cc(e,t){try{e.container.addComponent(t)}catch(n){on.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Wi(e){const t=e.name;if(Na.has(t))return on.debug(`There were multiple attempts to register component ${t}.`),!1;Na.set(t,e);for(const n of Ki.values())Cc(n,e);for(const n of _v.values())Cc(n,e);return!0}function yv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function vv(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},In=new Yf("app","Firebase",Ev);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=mv;function nd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:xa,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw In.create("bad-app-name",{appName:String(s)});if(n||(n=Jf()),!n)throw In.create("no-options");const i=Ki.get(s);if(i){if(zi(n,i.options)&&zi(r,i.config))return i;throw In.create("duplicate-app",{appName:s})}const a=new by(s);for(const c of Na.values())a.addComponent(c);const l=new Tv(n,r,a);return Ki.set(s,l),l}function wv(e=xa){const t=Ki.get(e);if(!t&&e===xa&&Jf())return nd();if(!t)throw In.create("no-app",{appName:e});return t}function Ir(e,t,n){var r;let s=(r=gv[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),on.warn(l.join(" "));return}Wi(new Ds(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="firebase-heartbeat-database",bv=1,xs="firebase-heartbeat-store";let ua=null;function rd(){return ua||(ua=Ly(Av,bv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xs)}catch(n){console.warn(n)}}}}).catch(e=>{throw In.create("idb-open",{originalErrorMessage:e.message})})),ua}async function Sv(e){try{const n=(await rd()).transaction(xs),r=await n.objectStore(xs).get(sd(e));return await n.done,r}catch(t){if(t instanceof Or)on.warn(t.message);else{const n=In.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});on.warn(n.message)}}}async function Pc(e,t){try{const r=(await rd()).transaction(xs,"readwrite");await r.objectStore(xs).put(t,sd(e)),await r.done}catch(n){if(n instanceof Or)on.warn(n.message);else{const r=In.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});on.warn(r.message)}}}function sd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=1024,Cv=30;class Pv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Dv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Cv){const a=xv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){on.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vc(),{heartbeatsToSend:r,unsentEntries:s}=Vv(this._heartbeatsCache.heartbeats),i=Hi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return on.warn(n),""}}}function Vc(){return new Date().toISOString().substring(0,10)}function Vv(e,t=Rv){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Dc(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Dv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _y()?yy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Sv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Pc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Pc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Dc(e){return Hi(JSON.stringify({version:2,heartbeats:e})).length}function xv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(e){Wi(new Ds("platform-logger",t=>new jy(t),"PRIVATE")),Wi(new Ds("heartbeat",t=>new Pv(t),"PRIVATE")),Ir(Da,Rc,e),Ir(Da,Rc,"esm2017"),Ir("fire-js","")}Nv("");var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wn,id;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,g){function _(){}_.prototype=g.prototype,I.D=g.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,w,S){for(var E=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)E[ce-2]=arguments[ce];return g.prototype[w].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,g,_){_||(_=0);var T=Array(16);if(typeof g=="string")for(var w=0;16>w;++w)T[w]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(w=0;16>w;++w)T[w]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=I.g[0],_=I.g[1],w=I.g[2];var S=I.g[3],E=g+(S^_&(w^S))+T[0]+3614090360&4294967295;g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[1]+3905402710&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[2]+606105819&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[3]+3250441966&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[4]+4118548399&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[5]+1200080426&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[6]+2821735955&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[7]+4249261313&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[8]+1770035416&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[9]+2336552879&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[10]+4294925233&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[11]+2304563134&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[12]+1804603682&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[13]+4254626195&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[14]+2792965006&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[15]+1236535329&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(w^S&(_^w))+T[1]+4129170786&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[6]+3225465664&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[11]+643717713&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[0]+3921069994&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[5]+3593408605&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[10]+38016083&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[15]+3634488961&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[4]+3889429448&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[9]+568446438&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[14]+3275163606&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[3]+4107603335&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[8]+1163531501&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[13]+2850285829&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[2]+4243563512&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[7]+1735328473&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[12]+2368359562&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(_^w^S)+T[5]+4294588738&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[8]+2272392833&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[11]+1839030562&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[14]+4259657740&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[1]+2763975236&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[4]+1272893353&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[7]+4139469664&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[10]+3200236656&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[13]+681279174&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[0]+3936430074&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[3]+3572445317&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[6]+76029189&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[9]+3654602809&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[12]+3873151461&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[15]+530742520&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[2]+3299628645&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(w^(_|~S))+T[0]+4096336452&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[7]+1126891415&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[14]+2878612391&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[5]+4237533241&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[12]+1700485571&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[3]+2399980690&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[10]+4293915773&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[1]+2240044497&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[8]+1873313359&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[15]+4264355552&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[6]+2734768916&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[13]+1309151649&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[4]+4149444226&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[11]+3174756917&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[2]+718787259&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var _=g-this.blockSize,T=this.B,w=this.h,S=0;S<g;){if(w==0)for(;S<=_;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<g;)if(T[w++]=I.charCodeAt(S++),w==this.blockSize){s(this,T),w=0;break}}else for(;S<g;)if(T[w++]=I[S++],w==this.blockSize){s(this,T),w=0;break}}this.h=w,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var _=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=_&255,_/=256;for(this.u(I),I=Array(16),g=_=0;4>g;++g)for(var T=0;32>T;T+=8)I[_++]=this.g[g]>>>T&255;return I};function i(I,g){var _=l;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=g(I)}function a(I,g){this.h=g;for(var _=[],T=!0,w=I.length-1;0<=w;w--){var S=I[w]|0;T&&S==g||(_[w]=S,T=!1)}this.g=_}var l={};function c(I){return-128<=I&&128>I?i(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return F(f(-I));for(var g=[],_=1,T=0;I>=_;T++)g[T]=I/_|0,_*=4294967296;return new a(g,0)}function d(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return F(d(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=f(Math.pow(g,8)),T=m,w=0;w<I.length;w+=8){var S=Math.min(8,I.length-w),E=parseInt(I.substring(w,w+S),g);8>S?(S=f(Math.pow(g,S)),T=T.j(S).add(f(E))):(T=T.j(_),T=T.add(f(E)))}return T}var m=c(0),v=c(1),b=c(16777216);e=a.prototype,e.m=function(){if(D(this))return-F(this).m();for(var I=0,g=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*g,g*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(D(this))return"-"+F(this).toString(I);for(var g=f(Math.pow(I,6)),_=this,T="";;){var w=z(_,g).g;_=W(_,w.j(g));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=w,V(_))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function D(I){return I.h==-1}e.l=function(I){return I=W(this,I),D(I)?-1:V(I)?0:1};function F(I){for(var g=I.g.length,_=[],T=0;T<g;T++)_[T]=~I.g[T];return new a(_,~I.h).add(v)}e.abs=function(){return D(this)?F(this):this},e.add=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0,w=0;w<=g;w++){var S=T+(this.i(w)&65535)+(I.i(w)&65535),E=(S>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);T=E>>>16,S&=65535,E&=65535,_[w]=E<<16|S}return new a(_,_[_.length-1]&-2147483648?-1:0)};function W(I,g){return I.add(F(g))}e.j=function(I){if(V(this)||V(I))return m;if(D(this))return D(I)?F(this).j(F(I)):F(F(this).j(I));if(D(I))return F(this.j(F(I)));if(0>this.l(b)&&0>I.l(b))return f(this.m()*I.m());for(var g=this.g.length+I.g.length,_=[],T=0;T<2*g;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<I.g.length;w++){var S=this.i(T)>>>16,E=this.i(T)&65535,ce=I.i(w)>>>16,De=I.i(w)&65535;_[2*T+2*w]+=E*De,K(_,2*T+2*w),_[2*T+2*w+1]+=S*De,K(_,2*T+2*w+1),_[2*T+2*w+1]+=E*ce,K(_,2*T+2*w+1),_[2*T+2*w+2]+=S*ce,K(_,2*T+2*w+2)}for(T=0;T<g;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=g;T<2*g;T++)_[T]=0;return new a(_,0)};function K(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function Q(I,g){this.g=I,this.h=g}function z(I,g){if(V(g))throw Error("division by zero");if(V(I))return new Q(m,m);if(D(I))return g=z(F(I),g),new Q(F(g.g),F(g.h));if(D(g))return g=z(I,F(g)),new Q(F(g.g),g.h);if(30<I.g.length){if(D(I)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var _=v,T=g;0>=T.l(I);)_=lt(_),T=lt(T);var w=Et(_,1),S=Et(T,1);for(T=Et(T,2),_=Et(_,2);!V(T);){var E=S.add(T);0>=E.l(I)&&(w=w.add(_),S=E),T=Et(T,1),_=Et(_,1)}return g=W(I,w.j(g)),new Q(w,g)}for(w=m;0<=I.l(g);){for(_=Math.max(1,Math.floor(I.m()/g.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=f(_),E=S.j(g);D(E)||0<E.l(I);)_-=T,S=f(_),E=S.j(g);V(S)&&(S=v),w=w.add(S),I=W(I,E)}return new Q(w,I)}e.A=function(I){return z(this,I).h},e.and=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)&I.i(T);return new a(_,this.h&I.h)},e.or=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)|I.i(T);return new a(_,this.h|I.h)},e.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)^I.i(T);return new a(_,this.h^I.h)};function lt(I){for(var g=I.g.length+1,_=[],T=0;T<g;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new a(_,I.h)}function Et(I,g){var _=g>>5;g%=32;for(var T=I.g.length-_,w=[],S=0;S<T;S++)w[S]=0<g?I.i(S+_)>>>g|I.i(S+_+1)<<32-g:I.i(S+_);return new a(w,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,id=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,wn=a}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var od,as,ad,Ci,Oa,ld,ud,cd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof mi=="object"&&mi];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in h))break t;h=h[R]}o=o[o.length-1],p=h[o],u=u(p),u!=p&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,p=!1,R={next:function(){if(!p&&h<o.length){var C=h++;return{value:u(C,o[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function m(o,u,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,p),o.apply(u,R)}}return function(){return o.apply(u,arguments)}}function v(o,u,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,v.apply(null,arguments)}function b(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function V(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,R,C){for(var j=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)j[Tt-2]=arguments[Tt];return u.prototype[R].apply(p,j)}}function D(o){const u=o.length;if(0<u){const h=Array(u);for(let p=0;p<u;p++)h[p]=o[p];return h}return[]}function F(o,u){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(c(p)){const R=o.length||0,C=p.length||0;o.length=R+C;for(let j=0;j<C;j++)o[R+j]=p[j]}else o.push(p)}}class W{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function K(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function z(o){return z[" "](o),o}z[" "]=function(){};var lt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function Et(o,u,h){for(const p in o)u.call(h,o[p],p,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function g(o){const u={};for(const h in o)u[h]=o[h];return u}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let h,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(h in p)o[h]=p[h];for(let C=0;C<_.length;C++)h=_[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function w(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function S(o){l.setTimeout(()=>{throw o},0)}function E(){var o=Se;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ce{constructor(){this.h=this.g=null}add(u,h){const p=De.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var De=new W(()=>new Vt,o=>o.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,mt=!1,Se=new ce,kn=()=>{const o=l.Promise.resolve(void 0);ot=()=>{o.then(We)}};var We=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){S(h)}var u=De;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}mt=!1};function Lt(){this.s=this.s,this.C=this.C}Lt.prototype.s=!1,Lt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Lt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Bt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};var Oo=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o})();function Mn(o,u){if(Bt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(lt){t:{try{z(u.nodeName);var R=!0;break t}catch{}R=!1}R||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Fn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Mn.aa.h.call(this)}}V(Mn,Bt);var Fn={2:"touch",3:"pen",4:"mouse"};Mn.prototype.h=function(){Mn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),Br=0;function Gs(o,u,h,p,R){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=R,this.key=++Br,this.da=this.fa=!1}function xe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ur(o){this.src=o,this.g={},this.h=0}Ur.prototype.add=function(o,u,h,p,R){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var j=A(o,u,p,R);return-1<j?(u=o[j],h||(u.fa=!1)):(u=new Gs(u,this.src,C,!!p,R),u.fa=h,o.push(u)),u};function y(o,u){var h=u.type;if(h in o.g){var p=o.g[h],R=Array.prototype.indexOf.call(p,u,void 0),C;(C=0<=R)&&Array.prototype.splice.call(p,R,1),C&&(xe(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function A(o,u,h,p){for(var R=0;R<o.length;++R){var C=o[R];if(!C.da&&C.listener==u&&C.capture==!!h&&C.ha==p)return R}return-1}var P="closure_lm_"+(1e6*Math.random()|0),L={};function O(o,u,h,p,R){if(Array.isArray(u)){for(var C=0;C<u.length;C++)O(o,u[C],h,p,R);return null}return h=et(h),o&&o[Ge]?o.K(u,h,f(p)?!!p.capture:!1,R):k(o,u,h,!1,p,R)}function k(o,u,h,p,R,C){if(!u)throw Error("Invalid event type");var j=f(R)?!!R.capture:!!R,Tt=q(o);if(Tt||(o[P]=Tt=new Ur(o)),h=Tt.add(u,h,p,j,C),h.proxy)return h;if(p=$(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)Oo||(R=j),R===void 0&&(R=!1),o.addEventListener(u.toString(),p,R);else if(o.attachEvent)o.attachEvent(M(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function $(){function o(h){return u.call(o.src,o.listener,h)}const u=Y;return o}function U(o,u,h,p,R){if(Array.isArray(u))for(var C=0;C<u.length;C++)U(o,u[C],h,p,R);else p=f(p)?!!p.capture:!!p,h=et(h),o&&o[Ge]?(o=o.i,u=String(u).toString(),u in o.g&&(C=o.g[u],h=A(C,h,p,R),-1<h&&(xe(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete o.g[u],o.h--)))):o&&(o=q(o))&&(u=o.g[u.toString()],o=-1,u&&(o=A(u,h,p,R)),(h=-1<o?u[o]:null)&&B(h))}function B(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Ge])y(u.i,o);else{var h=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(h,p,o.capture):u.detachEvent?u.detachEvent(M(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=q(u))?(y(h,o),h.h==0&&(h.src=null,u[P]=null)):xe(o)}}}function M(o){return o in L?L[o]:L[o]="on"+o}function Y(o,u){if(o.da)o=!0;else{u=new Mn(u,this);var h=o.listener,p=o.ha||o.src;o.fa&&B(o),o=h.call(p,u)}return o}function q(o){return o=o[P],o instanceof Ur?o:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(o){return typeof o=="function"?o:(o[X]||(o[X]=function(u){return o.handleEvent(u)}),o[X])}function Z(){Lt.call(this),this.i=new Ur(this),this.M=this,this.F=null}V(Z,Lt),Z.prototype[Ge]=!0,Z.prototype.removeEventListener=function(o,u,h,p){U(this,o,u,h,p)};function at(o,u){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Bt(u,o);else if(u instanceof Bt)u.target=u.target||o;else{var R=u;u=new Bt(p,o),T(u,R)}if(R=!0,h)for(var C=h.length-1;0<=C;C--){var j=u.g=h[C];R=ht(j,p,!0,u)&&R}if(j=u.g=o,R=ht(j,p,!0,u)&&R,R=ht(j,p,!1,u)&&R,h)for(C=0;C<h.length;C++)j=u.g=h[C],R=ht(j,p,!1,u)&&R}Z.prototype.N=function(){if(Z.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],p=0;p<h.length;p++)xe(h[p]);delete o.g[u],o.h--}}this.F=null},Z.prototype.K=function(o,u,h,p){return this.i.add(String(o),u,!1,h,p)},Z.prototype.L=function(o,u,h,p){return this.i.add(String(o),u,!0,h,p)};function ht(o,u,h,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var R=!0,C=0;C<u.length;++C){var j=u[C];if(j&&!j.da&&j.capture==h){var Tt=j.listener,Qt=j.ha||j.src;j.fa&&y(o.i,j),R=Tt.call(Qt,p)!==!1&&R}}return R&&!p.defaultPrevented}function Kt(o,u,h){if(typeof o=="function")h&&(o=v(o,h));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Wt(o){o.g=Kt(()=>{o.g=null,o.i&&(o.i=!1,Wt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ee extends Lt{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function te(o){Lt.call(this),this.h=o,this.g={}}V(te,Lt);var cn=[];function jr(o){Et(o.g,function(u,h){this.g.hasOwnProperty(h)&&B(u)},o),o.g={}}te.prototype.N=function(){te.aa.N.call(this),jr(this)},te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=l.JSON.stringify,Te=l.JSON.parse,Qs=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function sr(){}sr.prototype.h=null;function Gl(o){return o.h||(o.h=o.i())}function Ql(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ko(){Bt.call(this,"d")}V(ko,Bt);function Mo(){Bt.call(this,"c")}V(Mo,Bt);var Ln={},Xl=null;function Xs(){return Xl=Xl||new Z}Ln.La="serverreachability";function Jl(o){Bt.call(this,Ln.La,o)}V(Jl,Bt);function qr(o){const u=Xs();at(u,new Jl(u))}Ln.STAT_EVENT="statevent";function Yl(o,u){Bt.call(this,Ln.STAT_EVENT,o),this.stat=u}V(Yl,Bt);function he(o){const u=Xs();at(u,new Yl(u,o))}Ln.Ma="timingevent";function Zl(o,u){Bt.call(this,Ln.Ma,o),this.size=u}V(Zl,Bt);function Hr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function zr(){this.g=!0}zr.prototype.xa=function(){this.g=!1};function Fp(o,u,h,p,R,C){o.info(function(){if(o.g)if(C)for(var j="",Tt=C.split("&"),Qt=0;Qt<Tt.length;Qt++){var gt=Tt[Qt].split("=");if(1<gt.length){var ee=gt[0];gt=gt[1];var ne=ee.split("_");j=2<=ne.length&&ne[1]=="type"?j+(ee+"="+gt+"&"):j+(ee+"=redacted&")}}else j=null;else j=C;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+u+`
`+h+`
`+j})}function Lp(o,u,h,p,R,C,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+u+`
`+h+`
`+C+" "+j})}function ir(o,u,h,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Up(o,h)+(p?" "+p:"")})}function Bp(o,u){o.info(function(){return"TIMEOUT: "+u})}zr.prototype.info=function(){};function Up(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var R=p[1];if(Array.isArray(R)&&!(1>R.length)){var C=R[0];if(C!="noop"&&C!="stop"&&C!="close")for(var j=1;j<R.length;j++)R[j]=""}}}}return Gt(h)}catch{return u}}var Js={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fo;function Ys(){}V(Ys,sr),Ys.prototype.g=function(){return new XMLHttpRequest},Ys.prototype.i=function(){return{}},Fo=new Ys;function hn(o,u,h,p){this.j=o,this.i=u,this.l=h,this.R=p||1,this.U=new te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eu}function eu(){this.i=null,this.g="",this.h=!1}var nu={},Lo={};function Bo(o,u,h){o.L=1,o.v=ni(Qe(u)),o.m=h,o.P=!0,ru(o,null)}function ru(o,u){o.F=Date.now(),Zs(o),o.A=Qe(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),_u(h.i,"t",p),o.C=0,h=o.j.J,o.h=new eu,o.g=ku(o.j,h?u:null,!o.m),0<o.O&&(o.M=new Ee(v(o.Y,o,o.g),o.O)),u=o.U,h=o.g,p=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(cn[0]=R.toString()),R=cn);for(var C=0;C<R.length;C++){var j=O(h,R[C],p||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),qr(),Fp(o.i,o.u,o.A,o.l,o.R,o.m)}hn.prototype.ca=function(o){o=o.target;const u=this.M;u&&Xe(o)==3?u.j():this.Y(o)},hn.prototype.Y=function(o){try{if(o==this.g)t:{const ne=Xe(this.g);var u=this.g.Ba();const lr=this.g.Z();if(!(3>ne)&&(ne!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||ne!=4||u==7||(u==8||0>=lr?qr(3):qr(2)),Uo(this);var h=this.g.Z();this.X=h;e:if(su(this)){var p=Au(this.g);o="";var R=p.length,C=Xe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bn(this),Kr(this);var j="";break e}this.h.i=new l.TextDecoder}for(u=0;u<R;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(C&&u==R-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,Lp(this.i,this.u,this.A,this.l,this.R,ne,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Tt,Qt=this.g;if((Tt=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Tt)){var gt=Tt;break e}}gt=null}if(h=gt)ir(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jo(this,h);else{this.o=!1,this.s=3,he(12),Bn(this),Kr(this);break t}}if(this.P){h=!0;let Re;for(;!this.J&&this.C<j.length;)if(Re=jp(this,j),Re==Lo){ne==4&&(this.s=4,he(14),h=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Re==nu){this.s=4,he(15),ir(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else ir(this.i,this.l,Re,null),jo(this,Re);if(su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||j.length!=0||this.h.h||(this.s=1,he(16),h=!1),this.o=this.o&&h,!h)ir(this.i,this.l,j,"[Invalid Chunked Response]"),Bn(this),Kr(this);else if(0<j.length&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.ba&&!ee.M&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Wo(ee),ee.M=!0,he(11))}}else ir(this.i,this.l,j,null),jo(this,j);ne==4&&Bn(this),this.o&&!this.J&&(ne==4?Du(this.j,this):(this.o=!1,Zs(this)))}else sm(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),Bn(this),Kr(this)}}}catch{}finally{}};function su(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function jp(o,u){var h=o.C,p=u.indexOf(`
`,h);return p==-1?Lo:(h=Number(u.substring(h,p)),isNaN(h)?nu:(p+=1,p+h>u.length?Lo:(u=u.slice(p,p+h),o.C=p+h,u)))}hn.prototype.cancel=function(){this.J=!0,Bn(this)};function Zs(o){o.S=Date.now()+o.I,iu(o,o.I)}function iu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Hr(v(o.ba,o),u)}function Uo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}hn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Bp(this.i,this.A),this.L!=2&&(qr(),he(17)),Bn(this),this.s=2,Kr(this)):iu(this,this.S-o)};function Kr(o){o.j.G==0||o.J||Du(o.j,o)}function Bn(o){Uo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,jr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function jo(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||$o(h.h,o))){if(!o.K&&$o(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)li(h),oi(h);else break t;Ko(h),he(18)}}else h.za=R[1],0<h.za-h.T&&37500>R[2]&&h.F&&h.v==0&&!h.C&&(h.C=Hr(v(h.Za,h),6e3));if(1>=lu(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else jn(h,11)}else if((o.K||h.g==o)&&li(h),!K(u))for(R=h.Da.g.parse(u),u=0;u<R.length;u++){let gt=R[u];if(h.T=gt[0],gt=gt[1],h.G==2)if(gt[0]=="c"){h.K=gt[1],h.ia=gt[2];const ee=gt[3];ee!=null&&(h.la=ee,h.j.info("VER="+h.la));const ne=gt[4];ne!=null&&(h.Aa=ne,h.j.info("SVER="+h.Aa));const lr=gt[5];lr!=null&&typeof lr=="number"&&0<lr&&(p=1.5*lr,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const Re=o.g;if(Re){const ci=Re.g?Re.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ci){var C=p.h;C.g||ci.indexOf("spdy")==-1&&ci.indexOf("quic")==-1&&ci.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(qo(C,C.h),C.h=null))}if(p.D){const Go=Re.g?Re.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(p.ya=Go,St(p.I,p.D,Go))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var j=o;if(p.qa=Ou(p,p.J?p.ia:null,p.W),j.K){uu(p.h,j);var Tt=j,Qt=p.L;Qt&&(Tt.I=Qt),Tt.B&&(Uo(Tt),Zs(Tt)),p.g=j}else Pu(p);0<h.i.length&&ai(h)}else gt[0]!="stop"&&gt[0]!="close"||jn(h,7);else h.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?jn(h,7):zo(h):gt[0]!="noop"&&h.l&&h.l.ta(gt),h.v=0)}}qr(4)}catch{}}var $p=class{constructor(o,u){this.g=o,this.map=u}};function ou(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function au(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function lu(o){return o.h?1:o.g?o.g.size:0}function $o(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function qo(o,u){o.g?o.g.add(u):o.h=u}function uu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}ou.prototype.cancel=function(){if(this.i=cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function cu(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return D(o.i)}function qp(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,p=0;p<h;p++)u.push(o[p]);return u}u=[],h=0;for(p in o)u[h++]=o[p];return u}function Hp(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const p in o)u[h++]=p;return u}}}function hu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Hp(o),p=qp(o),R=p.length,C=0;C<R;C++)u.call(void 0,p[C],h&&h[C],o)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zp(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),R=null;if(0<=p){var C=o[h].substring(0,p);R=o[h].substring(p+1)}else C=o[h];u(C,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Un(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Un){this.h=o.h,ti(this,o.j),this.o=o.o,this.g=o.g,ei(this,o.s),this.l=o.l;var u=o.i,h=new Qr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),du(this,h),this.m=o.m}else o&&(u=String(o).match(fu))?(this.h=!1,ti(this,u[1]||"",!0),this.o=Wr(u[2]||""),this.g=Wr(u[3]||"",!0),ei(this,u[4]),this.l=Wr(u[5]||"",!0),du(this,u[6]||"",!0),this.m=Wr(u[7]||"")):(this.h=!1,this.i=new Qr(null,this.h))}Un.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Gr(u,pu,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Gr(u,pu,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Gr(h,h.charAt(0)=="/"?Gp:Wp,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Gr(h,Xp)),o.join("")};function Qe(o){return new Un(o)}function ti(o,u,h){o.j=h?Wr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ei(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function du(o,u,h){u instanceof Qr?(o.i=u,Jp(o.i,o.h)):(h||(u=Gr(u,Qp)),o.i=new Qr(u,o.h))}function St(o,u,h){o.i.set(u,h)}function ni(o){return St(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Wr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Gr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Kp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Kp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var pu=/[#\/\?@]/g,Wp=/[#\?:]/g,Gp=/[#\?]/g,Qp=/[#\?@]/g,Xp=/#/g;function Qr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function fn(o){o.g||(o.g=new Map,o.h=0,o.i&&zp(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=Qr.prototype,e.add=function(o,u){fn(this),this.i=null,o=or(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function mu(o,u){fn(o),u=or(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function gu(o,u){return fn(o),u=or(o,u),o.g.has(u)}e.forEach=function(o,u){fn(this),this.g.forEach(function(h,p){h.forEach(function(R){o.call(u,R,p,this)},this)},this)},e.na=function(){fn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){const R=o[p];for(let C=0;C<R.length;C++)h.push(u[p])}return h},e.V=function(o){fn(this);let u=[];if(typeof o=="string")gu(this,o)&&(u=u.concat(this.g.get(or(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return fn(this),this.i=null,o=or(this,o),gu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function _u(o,u,h){mu(o,u),0<h.length&&(o.i=null,o.g.set(or(o,u),D(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];const C=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var R=C;j[p]!==""&&(R+="="+encodeURIComponent(String(j[p]))),o.push(R)}}return this.i=o.join("&")};function or(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Jp(o,u){u&&!o.j&&(fn(o),o.i=null,o.g.forEach(function(h,p){var R=p.toLowerCase();p!=R&&(mu(this,p),_u(this,R,h))},o)),o.j=u}function Yp(o,u){const h=new zr;if(l.Image){const p=new Image;p.onload=b(dn,h,"TestLoadImage: loaded",!0,u,p),p.onerror=b(dn,h,"TestLoadImage: error",!1,u,p),p.onabort=b(dn,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=b(dn,h,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function Zp(o,u){const h=new zr,p=new AbortController,R=setTimeout(()=>{p.abort(),dn(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(R),C.ok?dn(h,"TestPingServer: ok",!0,u):dn(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),dn(h,"TestPingServer: error",!1,u)})}function dn(o,u,h,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(h)}catch{}}function tm(){this.g=new Qs}function em(o,u,h){const p=h||"";try{hu(o,function(R,C){let j=R;f(R)&&(j=Gt(R)),u.push(p+C+"="+encodeURIComponent(j))})}catch(R){throw u.push(p+"type="+encodeURIComponent("_badmap")),R}}function ri(o){this.l=o.Ub||null,this.j=o.eb||!1}V(ri,sr),ri.prototype.g=function(){return new si(this.l,this.j)},ri.prototype.i=(function(o){return function(){return o}})({});function si(o,u){Z.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(si,Z),e=si.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Jr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function yu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Xr(this):Jr(this),this.readyState==3&&yu(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Xr(this))},e.Qa=function(o){this.g&&(this.response=o,Xr(this))},e.ga=function(){this.g&&Xr(this)};function Xr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Jr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function Jr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function vu(o){let u="";return Et(o,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function Ho(o,u,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=vu(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):St(o,u,h))}function xt(o){Z.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(xt,Z);var nm=/^https?$/i,rm=["POST","PUT"];e=xt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fo.g(),this.v=this.o?Gl(this.o):Gl(Fo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(C){Eu(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)h.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(rm,u,void 0))||p||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wu(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){Eu(this,C)}};function Eu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Tu(o),ii(o)}function Tu(o){o.A||(o.A=!0,at(o,"complete"),at(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,at(this,"complete"),at(this,"abort"),ii(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),xt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Iu(this):this.bb())},e.bb=function(){Iu(this)};function Iu(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Xe(o)!=4||o.Z()!=2)){if(o.u&&Xe(o)==4)Kt(o.Ea,0,o);else if(at(o,"readystatechange"),Xe(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var p;if(p=j===0){var R=String(o.D).match(fu)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),p=!nm.test(R?R.toLowerCase():"")}h=p}if(h)at(o,"complete"),at(o,"success");else{o.m=6;try{var C=2<Xe(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",Tu(o)}}finally{ii(o)}}}}function ii(o,u){if(o.g){wu(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||at(o,"ready");try{h.onreadystatechange=p}catch{}}}function wu(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function Xe(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<Xe(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Te(u)}};function Au(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function sm(o){const u={};o=(o.g&&2<=Xe(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(K(o[p]))continue;var h=w(o[p]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=u[R]||[];u[R]=C,C.push(h)}I(u,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function bu(o){this.Aa=0,this.i=[],this.j=new zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yr("baseRetryDelayMs",5e3,o),this.cb=Yr("retryDelaySeedMs",1e4,o),this.Wa=Yr("forwardChannelMaxRetries",2,o),this.wa=Yr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ou(o&&o.concurrentRequestLimit),this.Da=new tm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=bu.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,p){he(0),this.W=o,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Ou(this,null,this.W),ai(this)};function zo(o){if(Su(o),o.G==3){var u=o.U++,h=Qe(o.I);if(St(h,"SID",o.K),St(h,"RID",u),St(h,"TYPE","terminate"),Zr(o,h),u=new hn(o,o.j,u),u.L=2,u.v=ni(Qe(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=ku(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Zs(u)}Nu(o)}function oi(o){o.g&&(Wo(o),o.g.cancel(),o.g=null)}function Su(o){oi(o),o.u&&(l.clearTimeout(o.u),o.u=null),li(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ai(o){if(!au(o.h)&&!o.s){o.s=!0;var u=o.Ga;ot||kn(),mt||(ot(),mt=!0),Se.add(u,o),o.B=0}}function im(o,u){return lu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Hr(v(o.Ga,o,u),xu(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new hn(this,this.j,o);let C=this.o;if(this.S&&(C?(C=g(C),T(C,this.S)):C=this.S),this.m!==null||this.O||(R.H=C,C=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=Cu(this,R,u),h=Qe(this.I),St(h,"RID",o),St(h,"CVER",22),this.D&&St(h,"X-HTTP-Session-Id",this.D),Zr(this,h),C&&(this.O?u="headers="+encodeURIComponent(String(vu(C)))+"&"+u:this.m&&Ho(h,this.m,C)),qo(this.h,R),this.Ua&&St(h,"TYPE","init"),this.P?(St(h,"$req",u),St(h,"SID","null"),R.T=!0,Bo(R,h,null)):Bo(R,h,u),this.G=2}}else this.G==3&&(o?Ru(this,o):this.i.length==0||au(this.h)||Ru(this))};function Ru(o,u){var h;u?h=u.l:h=o.U++;const p=Qe(o.I);St(p,"SID",o.K),St(p,"RID",h),St(p,"AID",o.T),Zr(o,p),o.m&&o.o&&Ho(p,o.m,o.o),h=new hn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Cu(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),qo(o.h,h),Bo(h,p,u)}function Zr(o,u){o.H&&Et(o.H,function(h,p){St(u,p,h)}),o.l&&hu({},function(h,p){St(u,p,h)})}function Cu(o,u,h){h=Math.min(o.i.length,h);var p=o.l?v(o.l.Na,o.l,o):null;t:{var R=o.i;let C=-1;for(;;){const j=["count="+h];C==-1?0<h?(C=R[0].g,j.push("ofs="+C)):C=0:j.push("ofs="+C);let Tt=!0;for(let Qt=0;Qt<h;Qt++){let gt=R[Qt].g;const ee=R[Qt].map;if(gt-=C,0>gt)C=Math.max(0,R[Qt].g-100),Tt=!1;else try{em(ee,j,"req"+gt+"_")}catch{p&&p(ee)}}if(Tt){p=j.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,p}function Pu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;ot||kn(),mt||(ot(),mt=!0),Se.add(u,o),o.v=0}}function Ko(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Hr(v(o.Fa,o),xu(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Hr(v(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,he(10),oi(this),Vu(this))};function Wo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Vu(o){o.g=new hn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Qe(o.qa);St(u,"RID","rpc"),St(u,"SID",o.K),St(u,"AID",o.T),St(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&St(u,"TO",o.ja),St(u,"TYPE","xmlhttp"),Zr(o,u),o.m&&o.o&&Ho(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=ni(Qe(u)),h.m=null,h.P=!0,ru(h,o)}e.Za=function(){this.C!=null&&(this.C=null,oi(this),Ko(this),he(19))};function li(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Du(o,u){var h=null;if(o.g==u){li(o),Wo(o),o.g=null;var p=2}else if($o(o.h,u))h=u.D,uu(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var R=o.B;p=Xs(),at(p,new Zl(p,h)),ai(o)}else Pu(o);else if(R=u.s,R==3||R==0&&0<u.X||!(p==1&&im(o,u)||p==2&&Ko(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),R){case 1:jn(o,5);break;case 4:jn(o,10);break;case 3:jn(o,6);break;default:jn(o,2)}}}function xu(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function jn(o,u){if(o.j.info("Error code "+u),u==2){var h=v(o.fb,o),p=o.Xa;const R=!p;p=new Un(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ti(p,"https"),ni(p),R?Yp(p.toString(),h):Zp(p.toString(),h)}else he(2);o.G=0,o.l&&o.l.sa(u),Nu(o),Su(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),he(2)):(this.j.info("Failed to ping google.com"),he(1))};function Nu(o){if(o.G=0,o.ka=[],o.l){const u=cu(o.h);(u.length!=0||o.i.length!=0)&&(F(o.ka,u),F(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function Ou(o,u,h){var p=h instanceof Un?Qe(h):new Un(h);if(p.g!="")u&&(p.g=u+"."+p.g),ei(p,p.s);else{var R=l.location;p=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;var C=new Un(null);p&&ti(C,p),u&&(C.g=u),R&&ei(C,R),h&&(C.l=h),p=C}return h=o.D,u=o.ya,h&&u&&St(p,h,u),St(p,"VER",o.la),Zr(o,p),p}function ku(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new xt(new ri({eb:h})):new xt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}e=Mu.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ui(){}ui.prototype.g=function(o,u){return new ge(o,u)};function ge(o,u){Z.call(this),this.g=new bu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!K(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!K(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new ar(this)}V(ge,Z),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){zo(this.g)},ge.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Gt(o),o=h);u.i.push(new $p(u.Ya++,o)),u.G==3&&ai(u)},ge.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,ge.aa.N.call(this)};function Fu(o){ko.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(Fu,ko);function Lu(){Mo.call(this),this.status=1}V(Lu,Mo);function ar(o){this.g=o}V(ar,Mu),ar.prototype.ua=function(){at(this.g,"a")},ar.prototype.ta=function(o){at(this.g,new Fu(o))},ar.prototype.sa=function(o){at(this.g,new Lu)},ar.prototype.ra=function(){at(this.g,"b")},ui.prototype.createWebChannel=ui.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,cd=function(){return new ui},ud=function(){return Xs()},ld=Ln,Oa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Js.NO_ERROR=0,Js.TIMEOUT=8,Js.HTTP_ERROR=6,Ci=Js,tu.COMPLETE="complete",ad=tu,Ql.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",Z.prototype.listen=Z.prototype.K,as=Ql,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,od=xt}).apply(typeof mi<"u"?mi:typeof self<"u"?self:typeof window<"u"?window:{});const Nc="@firebase/firestore",Oc="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ie.UNAUTHENTICATED=new ie(null),ie.GOOGLE_CREDENTIALS=new ie("google-credentials-uid"),ie.FIRST_PARTY=new ie("first-party-uid"),ie.MOCK_USER=new ie("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kr="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new Zf("@firebase/firestore");function dr(){return Xn.logLevel}function H(e,...t){if(Xn.logLevel<=dt.DEBUG){const n=t.map(El);Xn.debug(`Firestore (${kr}): ${e}`,...n)}}function an(e,...t){if(Xn.logLevel<=dt.ERROR){const n=t.map(El);Xn.error(`Firestore (${kr}): ${e}`,...n)}}function Cn(e,...t){if(Xn.logLevel<=dt.WARN){const n=t.map(El);Xn.warn(`Firestore (${kr}): ${e}`,...n)}}function El(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,hd(e,r,n)}function hd(e,t,n){let r=`FIRESTORE (${kr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw an(r),new Error(r)}function vt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||hd(t,s,r)}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Or{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ov{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(ie.UNAUTHENTICATED)))}shutdown(){}}class kv{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Mv{constructor(t){this.t=t,this.currentUser=ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){vt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new An;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new An,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=i;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new An)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string",31837,{l:r}),new fd(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return vt(t===null||typeof t=="string",2055,{h:t}),new ie(t)}}class Fv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=ie.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Fv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(ie.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bv{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){vt(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kc(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kc(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Uv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ut(e,t){return e<t?-1:e>t?1:0}function ka(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const i=dd(),a=jv(i.encode(Mc(e,n)),i.encode(Mc(t,n)));return a!==0?a:ut(r,s)}}n+=r>65535?2:1}return ut(e.length,t.length)}function Mc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function jv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ut(e[n],t[n]);return ut(e.length,t.length)}function Rr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc="__name__";class ke{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ke.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ke?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=ke.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ut(t.length,n.length)}static compareSegments(t,n){const r=ke.isNumericId(t),s=ke.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ke.extractNumericId(t).compare(ke.extractNumericId(n)):ka(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return wn.fromString(t.substring(4,t.length-2))}}class Rt extends ke{construct(t,n,r){return new Rt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new G(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Rt(n)}static emptyPath(){return new Rt([])}}const $v=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends ke{construct(t,n,r){return new Yt(t,n,r)}static isValidIdentifier(t){return $v.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fc}static keyField(){return new Yt([Fc])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(N.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new G(N.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new G(N.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.path=t}static fromPath(t){return new J(Rt.fromString(t))}static fromName(t){return new J(Rt.fromString(t).popFirst(5))}static empty(){return new J(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Rt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new J(new Rt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(e,t,n){if(!n)throw new G(N.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function qv(e,t,n,r){if(t===!0&&r===!0)throw new G(N.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Lc(e){if(!J.isDocumentKey(e))throw new G(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Bc(e){if(J.isDocumentKey(e))throw new G(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function md(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Il(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function Cr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Il(e);throw new G(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(e,t){const n={typeString:e};return t&&(n.value=t),n}function qs(e,t){if(!md(e))throw new G(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(N.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-62135596800,jc=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(t){return Ct.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*jc);return new Ct(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Uc)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jc}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(qs(t,Ct._jsonSchema))return new Ct(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Uc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Mt("string",Ct._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(t){return new rt(t)}static min(){return new rt(new Ct(0,0))}static max(){return new rt(new Ct(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=-1;function Hv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=rt.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new Pn(s,J.empty(),t)}function zv(e){return new Pn(e.readTime,e.key,Ns)}class Pn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Pn(rt.min(),J.empty(),Ns)}static max(){return new Pn(rt.max(),J.empty(),Ns)}}function Kv(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=J.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mr(e){if(e.code!==N.FAILED_PRECONDITION||e.message!==Wv)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new x(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):x.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):x.reject(n)}static resolve(t){return new x(((n,r)=>{n(t)}))}static reject(t){return new x(((n,r)=>{r(t)}))}static waitFor(t){return new x(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(c=>r(c)))})),a=!0,i===s&&n()}))}static or(t){let n=x.resolve(!1);for(const r of t)n=n.next((s=>s?x.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new x(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new x(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function Qv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}yo.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;function vo(e){return e==null}function Gi(e){return e===0&&1/e==-1/0}function Xv(e){return typeof e=="number"&&Number.isInteger(e)&&!Gi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="";function Jv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=$c(t)),t=Yv(e.get(n),t);return $c(t)}function Yv(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case gd:n+="";break;default:n+=i}}return n}function $c(e){return e+gd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _d(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n){this.comparator=t,this.root=n||Xt.EMPTY}insert(t,n){return new Dt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(t){return new Dt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gi(this.root,t,this.comparator,!1)}getReverseIterator(){return new gi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gi(this.root,t,this.comparator,!0)}}class gi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Xt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Xt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new Dt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hc(this.data.getIterator())}getIteratorFrom(t){return new Hc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new $t(this.comparator);return n.data=t,n}}class Hc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.fields=t,t.sort(Yt.comparator)}static empty(){return new Ce([])}unionWith(t){let n=new $t(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ce(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Rr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yd("Invalid base64 string: "+i):i}})(t);return new Zt(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new Zt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const Zv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vn(e){if(vt(!!e,39018),typeof e=="string"){let t=0;const n=Zv.exec(e);if(vt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Nt(e.seconds),nanos:Nt(e.nanos)}}function Nt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Dn(e){return typeof e=="string"?Zt.fromBase64String(e):Zt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="server_timestamp",Ed="__type__",Td="__previous_value__",Id="__local_write_time__";function Al(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ed])===null||n===void 0?void 0:n.stringValue)===vd}function Eo(e){const t=e.mapValue.fields[Td];return Al(t)?Eo(t):t}function Os(e){const t=Vn(e.mapValue.fields[Id].timestampValue);return new Ct(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Qi="(default)";class ks{constructor(t,n){this.projectId=t,this.database=n||Qi}static empty(){return new ks("","")}get isDefaultDatabase(){return this.database===Qi}isEqual(t){return t instanceof ks&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="__type__",eE="__max__",_i={mapValue:{}},Ad="__vector__",Xi="value";function xn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Al(e)?4:rE(e)?9007199254740991:nE(e)?10:11:tt(28295,{value:e})}function He(e,t){if(e===t)return!0;const n=xn(e);if(n!==xn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Os(e).isEqual(Os(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Vn(s.timestampValue),l=Vn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Dn(s.bytesValue).isEqual(Dn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Nt(s.doubleValue),l=Nt(i.doubleValue);return a===l?Gi(a)===Gi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Rr(e.arrayValue.values||[],t.arrayValue.values||[],He);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(qc(a)!==qc(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!He(a[c],l[c])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function Ms(e,t){return(e.values||[]).find((n=>He(n,t)))!==void 0}function Pr(e,t){if(e===t)return 0;const n=xn(e),r=xn(t);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Nt(i.integerValue||i.doubleValue),c=Nt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(e,t);case 3:return zc(e.timestampValue,t.timestampValue);case 4:return zc(Os(e),Os(t));case 5:return ka(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Dn(i),c=Dn(a);return l.compareTo(c)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ut(l[f],c[f]);if(d!==0)return d}return ut(l.length,c.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=ut(Nt(i.latitude),Nt(a.latitude));return l!==0?l:ut(Nt(i.longitude),Nt(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Kc(e.arrayValue,t.arrayValue);case 10:return(function(i,a){var l,c,f,d;const m=i.fields||{},v=a.fields||{},b=(l=m[Xi])===null||l===void 0?void 0:l.arrayValue,V=(c=v[Xi])===null||c===void 0?void 0:c.arrayValue,D=ut(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:Kc(b,V)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===_i.mapValue&&a===_i.mapValue)return 0;if(i===_i.mapValue)return 1;if(a===_i.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const v=ka(c[m],d[m]);if(v!==0)return v;const b=Pr(l[c[m]],f[d[m]]);if(b!==0)return b}return ut(c.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{le:n})}}function zc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=Vn(e),r=Vn(t),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function Kc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Pr(n[s],r[s]);if(i)return i}return ut(n.length,r.length)}function Vr(e){return Ma(e)}function Ma(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Vn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Dn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return J.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ma(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ma(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function Pi(e){switch(xn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Eo(e);return t?16+Pi(t):16;case 5:return 2*e.stringValue.length;case 6:return Dn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Pi(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return tr(r.fields,((i,a)=>{s+=i.length+Pi(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function Fa(e){return!!e&&"integerValue"in e}function bl(e){return!!e&&"arrayValue"in e}function Wc(e){return!!e&&"nullValue"in e}function Gc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Vi(e){return!!e&&"mapValue"in e}function nE(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[wd])===null||n===void 0?void 0:n.stringValue)===Ad}function Es(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return tr(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Es(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Es(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===eE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.value=t}static empty(){return new Ie({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Vi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Es(n)}setAll(t){let n=Yt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Es(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Vi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return He(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Vi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){tr(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ie(Es(this.value))}}function bd(e){const t=[];return tr(e.fields,((n,r)=>{const s=new Yt([n]);if(Vi(r)){const i=bd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Ce(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,rt.min(),rt.min(),rt.min(),Ie.empty(),0)}static newFoundDocument(t,n,r,s){return new ae(t,1,n,rt.min(),r,s,0)}static newNoDocument(t,n){return new ae(t,2,n,rt.min(),rt.min(),Ie.empty(),0)}static newUnknownDocument(t,n){return new ae(t,3,n,rt.min(),rt.min(),Ie.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,n){this.position=t,this.inclusive=n}}function Qc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(a.referenceValue),n.key):r=Pr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!He(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t,n="asc"){this.field=t,this.dir=n}}function sE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{}class jt extends Sd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new oE(t,n,r):n==="array-contains"?new uE(t,r):n==="in"?new cE(t,r):n==="not-in"?new hE(t,r):n==="array-contains-any"?new fE(t,r):new jt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new aE(t,r):new lE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pr(n,this.value)):n!==null&&xn(this.value)===xn(n)&&this.matchesComparison(Pr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ze extends Sd{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new ze(t,n)}matches(t){return Rd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Rd(e){return e.op==="and"}function Cd(e){return iE(e)&&Rd(e)}function iE(e){for(const t of e.filters)if(t instanceof ze)return!1;return!0}function La(e){if(e instanceof jt)return e.field.canonicalString()+e.op.toString()+Vr(e.value);if(Cd(e))return e.filters.map((t=>La(t))).join(",");{const t=e.filters.map((n=>La(n))).join(",");return`${e.op}(${t})`}}function Pd(e,t){return e instanceof jt?(function(r,s){return s instanceof jt&&r.op===s.op&&r.field.isEqual(s.field)&&He(r.value,s.value)})(e,t):e instanceof ze?(function(r,s){return s instanceof ze&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&Pd(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function Vd(e){return e instanceof jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vr(n.value)}`})(e):e instanceof ze?(function(n){return n.op.toString()+" {"+n.getFilters().map(Vd).join(" ,")+"}"})(e):"Filter"}class oE extends jt{constructor(t,n,r){super(t,n,r),this.key=J.fromName(r.referenceValue)}matches(t){const n=J.comparator(t.key,this.key);return this.matchesComparison(n)}}class aE extends jt{constructor(t,n){super(t,"in",n),this.keys=Dd("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class lE extends jt{constructor(t,n){super(t,"not-in",n),this.keys=Dd("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Dd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>J.fromName(r.referenceValue)))}class uE extends jt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return bl(n)&&Ms(n.arrayValue,this.value)}}class cE extends jt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ms(this.value.arrayValue,n)}}class hE extends jt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ms(this.value.arrayValue,n)}}class fE extends jt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!bl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ms(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Jc(e,t=null,n=[],r=[],s=null,i=null,a=null){return new dE(e,t,n,r,s,i,a)}function Sl(e){const t=st(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>La(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),vo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Vr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Vr(r))).join(",")),t.Pe=n}return t.Pe}function Rl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Pd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xc(e.startAt,t.startAt)&&Xc(e.endAt,t.endAt)}function Ba(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function pE(e,t,n,r,s,i,a,l){return new To(e,t,n,r,s,i,a,l)}function xd(e){return new To(e)}function Yc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function mE(e){return e.collectionGroup!==null}function Ts(e){const t=st(e);if(t.Te===null){t.Te=[];const n=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $t(Yt.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Te.push(new Yi(i,r))})),n.has(Yt.keyField().canonicalString())||t.Te.push(new Yi(Yt.keyField(),r))}return t.Te}function Le(e){const t=st(e);return t.Ie||(t.Ie=gE(t,Ts(e))),t.Ie}function gE(e,t){if(e.limitType==="F")return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Yi(s.field,i)}));const n=e.endAt?new Ji(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ji(e.startAt.position,e.startAt.inclusive):null;return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ua(e,t,n){return new To(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Io(e,t){return Rl(Le(e),Le(t))&&e.limitType===t.limitType}function Nd(e){return`${Sl(Le(e))}|lt:${e.limitType}`}function pr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Vd(s))).join(", ")}]`),vo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Vr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Vr(s))).join(",")),`Target(${r})`})(Le(e))}; limitType=${e.limitType})`}function wo(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of Ts(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,c){const f=Qc(a,l,c);return a.inclusive?f<=0:f<0})(r.startAt,Ts(r),s)||r.endAt&&!(function(a,l,c){const f=Qc(a,l,c);return a.inclusive?f>=0:f>0})(r.endAt,Ts(r),s))})(e,t)}function _E(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Od(e){return(t,n)=>{let r=!1;for(const s of Ts(e)){const i=yE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function yE(e,t,n){const r=e.field.isKeyField()?J.comparator(t.key,n.key):(function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?Pr(c,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){tr(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return _d(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Dt(J.comparator);function ln(){return vE}const kd=new Dt(J.comparator);function ls(...e){let t=kd;for(const n of e)t=t.insert(n.key,n);return t}function Md(e){let t=kd;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Wn(){return Is()}function Fd(){return Is()}function Is(){return new er((e=>e.toString()),((e,t)=>e.isEqual(t)))}const EE=new Dt(J.comparator),TE=new $t(J.comparator);function ct(...e){let t=TE;for(const n of e)t=t.add(n);return t}const IE=new $t(ut);function wE(){return IE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gi(t)?"-0":t}}function Ld(e){return{integerValue:""+e}}function AE(e,t){return Xv(t)?Ld(t):Cl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this._=void 0}}function bE(e,t,n){return e instanceof Zi?(function(s,i){const a={fields:{[Ed]:{stringValue:vd},[Id]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Al(i)&&(i=Eo(i)),i&&(a.fields[Td]=i),{mapValue:a}})(n,t):e instanceof Fs?Ud(e,t):e instanceof Ls?jd(e,t):(function(s,i){const a=Bd(s,i),l=Zc(a)+Zc(s.Ee);return Fa(a)&&Fa(s.Ee)?Ld(l):Cl(s.serializer,l)})(e,t)}function SE(e,t,n){return e instanceof Fs?Ud(e,t):e instanceof Ls?jd(e,t):n}function Bd(e,t){return e instanceof to?(function(r){return Fa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Zi extends Ao{}class Fs extends Ao{constructor(t){super(),this.elements=t}}function Ud(e,t){const n=$d(t);for(const r of e.elements)n.some((s=>He(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ls extends Ao{constructor(t){super(),this.elements=t}}function jd(e,t){let n=$d(t);for(const r of e.elements)n=n.filter((s=>!He(s,r)));return{arrayValue:{values:n}}}class to extends Ao{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function Zc(e){return Nt(e.integerValue||e.doubleValue)}function $d(e){return bl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function RE(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Fs&&s instanceof Fs||r instanceof Ls&&s instanceof Ls?Rr(r.elements,s.elements,He):r instanceof to&&s instanceof to?He(r.Ee,s.Ee):r instanceof Zi&&s instanceof Zi})(e.transform,t.transform)}class CE{constructor(t,n){this.version=t,this.transformResults=n}}class Be{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Be}static exists(t){return new Be(void 0,t)}static updateTime(t){return new Be(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Di(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class bo{}function qd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Pl(e.key,Be.none()):new Hs(e.key,e.data,Be.none());{const n=e.data,r=Ie.empty();let s=new $t(Yt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new nr(e.key,r,new Ce(s.toArray()),Be.none())}}function PE(e,t,n){e instanceof Hs?(function(s,i,a){const l=s.value.clone(),c=eh(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof nr?(function(s,i,a){if(!Di(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=eh(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Hd(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function ws(e,t,n,r){return e instanceof Hs?(function(i,a,l,c){if(!Di(i.precondition,a))return l;const f=i.value.clone(),d=nh(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof nr?(function(i,a,l,c){if(!Di(i.precondition,a))return l;const f=nh(i.fieldTransforms,c,a),d=a.data;return d.setAll(Hd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(e,t,n,r):(function(i,a,l){return Di(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function VE(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Bd(r.transform,s||null);i!=null&&(n===null&&(n=Ie.empty()),n.set(r.field,i))}return n||null}function th(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Rr(r,s,((i,a)=>RE(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hs extends bo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class nr extends bo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function eh(e,t,n){const r=new Map;vt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,SE(a,l,n[s]))}return r}function nh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,bE(i,a,t))}return r}class Pl extends bo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DE extends bo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&PE(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ws(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ws(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Fd();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=qd(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ct())}isEqual(t){return this.batchId===t.batchId&&Rr(this.mutations,t.mutations,((n,r)=>th(n,r)))&&Rr(this.baseMutations,t.baseMutations,((n,r)=>th(n,r)))}}class Vl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){vt(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let s=(function(){return EE})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Vl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,ft;function kE(e){switch(e){case N.OK:return tt(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function zd(e){if(e===void 0)return an("GRPC error has no .code"),N.UNKNOWN;switch(e){case kt.OK:return N.OK;case kt.CANCELLED:return N.CANCELLED;case kt.UNKNOWN:return N.UNKNOWN;case kt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case kt.INTERNAL:return N.INTERNAL;case kt.UNAVAILABLE:return N.UNAVAILABLE;case kt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case kt.NOT_FOUND:return N.NOT_FOUND;case kt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case kt.ABORTED:return N.ABORTED;case kt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case kt.DATA_LOSS:return N.DATA_LOSS;default:return tt(39323,{code:e})}}(ft=kt||(kt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new wn([4294967295,4294967295],0);function rh(e){const t=dd().encode(e),n=new id;return n.update(t),new Uint8Array(n.digest())}function sh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new wn([n,r],0),new wn([s,i],0)]}class Dl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new us(`Invalid padding: ${n}`);if(r<0)throw new us(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new us(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new us(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=wn.fromNumber(this.fe)}pe(t,n,r){let s=t.add(n.multiply(wn.fromNumber(r)));return s.compare(ME)===1&&(s=new wn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=rh(t),[r,s]=sh(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);if(!this.ye(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Dl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.fe===0)return;const n=rh(t),[r,s]=sh(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);this.we(a)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class us extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,zs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new So(rt.min(),s,new Dt(ut),ln(),ct())}}class zs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new zs(r,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,n,r,s){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=s}}class Kd{constructor(t,n){this.targetId=t,this.De=n}}class Wd{constructor(t,n,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ih{constructor(){this.ve=0,this.Ce=oh(),this.Fe=Zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=ct(),n=ct(),r=ct();return this.Ce.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new zs(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=oh()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class FE{constructor(t){this.We=t,this.Ge=new Map,this.ze=ln(),this.je=yi(),this.Je=yi(),this.He=new Dt(ut)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,(n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(t){const n=t.targetId,r=t.De.count,s=this.st(n);if(s){const i=s.target;if(Ba(i))if(r===0){const a=new J(i.path);this.Xe(n,a,ae.newNoDocument(a,rt.min()))}else vt(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(t),c=l?this.ut(l,t,a):1;if(c!==0){this.rt(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Dn(r).toUint8Array()}catch(c){if(c instanceof yd)return Cn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Dl(a,s,i)}catch(c){return Cn(c instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.Xe(n,i,null),s++)})),s}Pt(t){const n=new Map;this.Ge.forEach(((i,a)=>{const l=this.st(a);if(l){if(i.current&&Ba(l.target)){const c=new J(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,ae.newNoDocument(c,t))}i.Ne&&(n.set(a,i.Le()),i.ke())}}));let r=ct();this.Je.forEach(((i,a)=>{let l=!0;a.forEachWhile((c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.ze.forEach(((i,a)=>a.setReadTime(t)));const s=new So(t,n,this.He,this.ze,r);return this.ze=ln(),this.je=yi(),this.Je=yi(),this.He=new Dt(ut),s}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const s=this.tt(t);this.It(t,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new ih,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new $t(ut),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new $t(ut),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new ih),this.We.getRemoteKeysForTarget(t).forEach((n=>{this.Xe(t,n,null)}))}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function yi(){return new Dt(J.comparator)}function oh(){return new Dt(J.comparator)}const LE={asc:"ASCENDING",desc:"DESCENDING"},BE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UE={and:"AND",or:"OR"};class jE{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ja(e,t){return e.useProto3Json||vo(t)?t:{value:t}}function eo(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $E(e,t){return eo(e,t.toTimestamp())}function Ue(e){return vt(!!e,49232),rt.fromTimestamp((function(n){const r=Vn(n);return new Ct(r.seconds,r.nanos)})(e))}function xl(e,t){return $a(e,t).canonicalString()}function $a(e,t){const n=(function(s){return new Rt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Qd(e){const t=Rt.fromString(e);return vt(tp(t),10190,{key:t.toString()}),t}function qa(e,t){return xl(e.databaseId,t.path)}function ca(e,t){const n=Qd(t);if(n.get(1)!==e.databaseId.projectId)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(Jd(n))}function Xd(e,t){return xl(e.databaseId,t)}function qE(e){const t=Qd(e);return t.length===4?Rt.emptyPath():Jd(t)}function Ha(e){return new Rt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Jd(e){return vt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function ah(e,t,n){return{name:qa(e,t),fields:n.value.mapValue.fields}}function HE(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(vt(d===void 0||typeof d=="string",58123),Zt.fromBase64String(d||"")):(vt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Zt.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?N.UNKNOWN:zd(f.code);return new G(d,f.message||"")})(a);n=new Wd(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ca(e,r.document.name),i=Ue(r.document.updateTime),a=r.document.createTime?Ue(r.document.createTime):rt.min(),l=new Ie({mapValue:{fields:r.document.fields}}),c=ae.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new xi(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ca(e,r.document),i=r.readTime?Ue(r.readTime):rt.min(),a=ae.newNoDocument(s,i),l=r.removedTargetIds||[];n=new xi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ca(e,r.document),i=r.removedTargetIds||[];n=new xi([],i,s,null)}else{if(!("filter"in t))return tt(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new OE(s,i),l=r.targetId;n=new Kd(l,a)}}return n}function zE(e,t){let n;if(t instanceof Hs)n={update:ah(e,t.key,t.value)};else if(t instanceof Pl)n={delete:qa(e,t.key)};else if(t instanceof nr)n={update:ah(e,t.key,t.data),updateMask:tT(t.fieldMask)};else{if(!(t instanceof DE))return tt(16599,{Rt:t.type});n={verify:qa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Zi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ls)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof to)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:$E(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function KE(e,t){return e&&e.length>0?(vt(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Ue(s.updateTime):Ue(i);return a.isEqual(rt.min())&&(a=Ue(i)),new CE(a,s.transformResults||[])})(n,t)))):[]}function WE(e,t){return{documents:[Xd(e,t.path)]}}function GE(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xd(e,s);const i=(function(f){if(f.length!==0)return Zd(ze.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(v){return{field:mr(v.field),direction:JE(v.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ja(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{Vt:n,parent:s}}function QE(e){let t=qE(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(m){const v=Yd(m);return v instanceof ze&&Cd(v)?v.getFilters():[v]})(n.where));let a=[];n.orderBy&&(a=(function(m){return m.map((v=>(function(V){return new Yi(gr(V.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(m){let v;return v=typeof m=="object"?m.value:m,vo(v)?null:v})(n.limit));let c=null;n.startAt&&(c=(function(m){const v=!!m.before,b=m.values||[];return new Ji(b,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(m){const v=!m.before,b=m.values||[];return new Ji(b,v)})(n.endAt)),pE(t,s,a,i,l,"F",c,f)}function XE(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Yd(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gr(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gr(n.unaryFilter.field);return jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gr(n.unaryFilter.field);return jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=gr(n.unaryFilter.field);return jt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return jt.create(gr(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return ze.create(n.compositeFilter.filters.map((r=>Yd(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function JE(e){return LE[e]}function YE(e){return BE[e]}function ZE(e){return UE[e]}function mr(e){return{fieldPath:e.canonicalString()}}function gr(e){return Yt.fromServerFormat(e.fieldPath)}function Zd(e){return e instanceof jt?(function(n){if(n.op==="=="){if(Gc(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NAN"}};if(Wc(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gc(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NAN"}};if(Wc(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mr(n.field),op:YE(n.op),value:n.value}}})(e):e instanceof ze?(function(n){const r=n.getFilters().map((s=>Zd(s)));return r.length===1?r[0]:{compositeFilter:{op:ZE(n.op),filters:r}}})(e):tt(54877,{filter:e})}function tT(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function tp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t,n,r,s,i=rt.min(),a=rt.min(),l=Zt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new vn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new vn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t){this.gt=t}}function nT(e){const t=QE({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ua(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.Dn=new sT}addToCollectionParentIndex(t,n){return this.Dn.add(n),x.resolve()}getCollectionParents(t,n){return x.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return x.resolve()}deleteFieldIndex(t,n){return x.resolve()}deleteAllFieldIndexes(t){return x.resolve()}createTargetIndexes(t,n){return x.resolve()}getDocumentsMatchingTarget(t,n){return x.resolve(null)}getIndexType(t,n){return x.resolve(0)}getFieldIndexes(t,n){return x.resolve([])}getNextCollectionGroupToUpdate(t){return x.resolve(null)}getMinOffset(t,n){return x.resolve(Pn.min())}getMinOffsetFromCollectionGroup(t,n){return x.resolve(Pn.min())}updateCollectionGroup(t,n,r){return x.resolve()}updateIndexEntries(t,n){return x.resolve()}}class sT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new $t(Rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new $t(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ep=41943040;class me{static withCacheSize(t){return new me(t,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */me.DEFAULT_COLLECTION_PERCENTILE=10,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,me.DEFAULT=new me(ep,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),me.DISABLED=new me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Dr(0)}static ur(){return new Dr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="LruGarbageCollector",iT=1048576;function ch([e,t],[n,r]){const s=ut(e,n);return s===0?ut(t,r):s}class oT{constructor(t){this.Tr=t,this.buffer=new $t(ch),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ch(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){H(uh,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fr(n)?H(uh,"Ignoring IndexedDB error during garbage collection: ",n):await Mr(n)}await this.Rr(3e5)}))}}class lT{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return x.resolve(yo.ue);const r=new oT(n);return this.Vr.forEachTarget(t,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(t,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(lh)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lh):this.pr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s)))).next((m=>(r=m,l=Date.now(),this.removeTargets(t,r,n)))).next((m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,r)))).next((m=>(f=Date.now(),dr()<=dt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function uT(e,t){return new lT(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.changes=new er((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&ws(r.mutation,s,Ce.empty(),Ct.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ct()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ct()){const s=Wn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=ls();return i.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=Wn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ct())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=ln();const a=Is(),l=(function(){return Is()})();return n.forEach(((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof nr)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),ws(d.mutation,f,d.mutation.getFieldMask(),Ct.now())):a.set(f.key,Ce.empty())})),this.recalculateAndSaveOverlays(t,i).next((c=>(c.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>{var m;return l.set(f,new hT(d,(m=a.get(f))!==null&&m!==void 0?m:null))})),l)))}recalculateAndSaveOverlays(t,n){const r=Is();let s=new Dt(((a,l)=>a-l)),i=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||Ce.empty();d=l.applyToLocalView(f,d),r.set(c,d);const m=(s.get(l.batchId)||ct()).add(c);s=s.insert(l.batchId,m)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,m=Fd();d.forEach((v=>{if(!i.has(v)){const b=qd(n.get(v),r.get(v));b!==null&&m.set(v,b),i=i.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return x.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):mE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):x.resolve(Wn());let l=Ns,c=i;return a.next((f=>x.forEach(f,((d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?x.resolve():this.remoteDocumentCache.getEntry(t,d).next((v=>{c=c.insert(d,v)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,c,f,ct()))).next((d=>({batchId:l,changes:Md(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new J(n)).next((r=>{let s=ls();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=ls();return this.indexManager.getCollectionParents(t,i).next((l=>x.forEach(l,(c=>{const f=(function(m,v){return new To(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((m,v)=>{a=a.insert(m,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,ae.newInvalidDocument(d)))}));let l=ls();return a.forEach(((c,f)=>{const d=i.get(c);d!==void 0&&ws(d.mutation,f,Ce.empty(),Ct.now()),wo(n,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return x.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ue(s.createTime)}})(n)),x.resolve()}getNamedQuery(t,n){return x.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:nT(s.bundledQuery),readTime:Ue(s.readTime)}})(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.overlays=new Dt(J.comparator),this.kr=new Map}getOverlay(t,n){return x.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Wn();return x.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.wt(t,n,i)})),x.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(t,n,r){const s=Wn(),i=n.length+1,a=new J(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return x.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Dt(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Wn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Wn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return x.resolve(l)}wt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new NE(n,r));let i=this.kr.get(n);i===void 0&&(i=ct(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(t){return x.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,x.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.qr=new $t(Ht.Qr),this.$r=new $t(Ht.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new Ht(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Wr(new Ht(t,n))}Gr(t,n){t.forEach((r=>this.removeReference(r,n)))}zr(t){const n=new J(new Rt([])),r=new Ht(n,t),s=new Ht(n,t+1),i=[];return this.$r.forEachInRange([r,s],(a=>{this.Wr(a),i.push(a.key)})),i}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new J(new Rt([])),r=new Ht(n,t),s=new Ht(n,t+1);let i=ct();return this.$r.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new Ht(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ht{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return J.comparator(t.key,n.key)||ut(t.Hr,n.Hr)}static Ur(t,n){return ut(t.Hr,n.Hr)||J.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new $t(Ht.Qr)}checkEmpty(t){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new xE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new Ht(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return x.resolve(a)}lookupMutationBatch(t,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return x.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?wl:this.er-1)}getAllMutationBatches(t){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],(a=>{const l=this.Zr(a.Hr);i.push(l)})),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $t(ut);return n.forEach((s=>{const i=new Ht(s,0),a=new Ht(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],(l=>{r=r.add(l.Hr)}))})),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const a=new Ht(new J(i),0);let l=new $t(ut);return this.Yr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Hr)),!0)}),a),x.resolve(this.ei(l))}ei(t){const n=[];return t.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){vt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(n.mutations,(s=>{const i=new Ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Yr=r}))}rr(t){}containsKey(t,n){const r=new Ht(n,0),s=this.Yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,x.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t){this.ni=t,this.docs=(function(){return new Dt(J.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():ae.newInvalidDocument(n))}getEntries(t,n){let r=ln();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ae.newInvalidDocument(s))})),x.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=ln();const a=n.path,l=new J(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Kv(zv(d),r)<=0||(s.has(d.key)||wo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ri(t,n){return x.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new yT(this)}getSize(t){return x.resolve(this.size)}}class yT extends cT{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(t,s)):this.Or.removeEntry(r)})),x.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t){this.persistence=t,this.ii=new er((n=>Sl(n)),Rl),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.si=0,this.oi=new Nl,this.targetCount=0,this._i=Dr.ar()}forEachTarget(t,n){return this.ii.forEach(((r,s)=>n(s))),x.resolve()}getLastRemoteSnapshotVersion(t){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),x.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new Dr(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,x.resolve()}updateTargetData(t,n){return this.hr(n),x.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.ii.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),x.waitFor(i).next((()=>s))}getTargetCount(t){return x.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return x.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),x.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),x.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),x.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return x.resolve(r)}containsKey(t,n){return x.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(t,n){this.ai={},this.overlays={},this.ui=new yo(0),this.ci=!1,this.ci=!0,this.li=new mT,this.referenceDelegate=t(this),this.hi=new vT(this),this.indexManager=new rT,this.remoteDocumentCache=(function(s){return new _T(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new eT(n),this.Ti=new dT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new pT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new gT(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new ET(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(t,n){return x.or(Object.values(this.ai).map((r=>()=>r.containsKey(t,n))))}}class ET extends Gv{constructor(t){super(),this.currentSequenceNumber=t}}class Ol{constructor(t){this.persistence=t,this.Ai=new Nl,this.Ri=null}static Vi(t){return new Ol(t)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),x.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),x.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.mi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,(r=>{const s=J.fromPath(r);return this.fi(t,s).next((i=>{i||n.removeEntry(s,rt.min())}))})).next((()=>(this.Ri=null,n.apply(t))))}updateLimboDocument(t,n){return this.fi(t,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(t){return 0}fi(t,n){return x.or([()=>x.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class no{constructor(t,n){this.persistence=t,this.gi=new er((r=>Jv(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=uT(this,n)}static Vi(t,n){return new no(t,n)}Ii(){}di(t){return x.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}yr(t){let n=0;return this.gr(t,(r=>{n++})).next((()=>n))}gr(t,n){return x.forEach(this.gi,((r,s)=>this.Sr(t,r,s).next((i=>i?x.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(t,(a=>this.Sr(t,a,n).next((l=>{l||(r++,i.removeEntry(a,rt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),x.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),x.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),x.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),x.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Pi(t.data.value)),n}Sr(t,n,r){return x.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.gi.get(n);return x.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=s}static Es(t,n){let r=ct(),s=ct();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new kl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return gy()?8:Qv(py())>0?6:4})()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ps(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ys(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new TT;return this.ws(t,n,a).next((l=>{if(i.result=l,this.Rs)return this.Ss(t,n,a,l.size)}))})).next((()=>i.result))}Ss(t,n,r,s){return r.documentReadCount<this.Vs?(dr()<=dt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",pr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(dr()<=dt.DEBUG&&H("QueryEngine","Query:",pr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(dr()<=dt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",pr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Le(n))):x.resolve())}ps(t,n){if(Yc(n))return x.resolve(null);let r=Le(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Ua(n,null,"F"),r=Le(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=ct(...i);return this.gs.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((c=>{const f=this.bs(n,l);return this.Ds(n,f,a,c.readTime)?this.ps(t,Ua(n,null,"F")):this.vs(t,f,n,c)}))))})))))}ys(t,n,r,s){return Yc(n)||s.isEqual(rt.min())?x.resolve(null):this.gs.getDocuments(t,r).next((i=>{const a=this.bs(n,i);return this.Ds(n,a,r,s)?x.resolve(null):(dr()<=dt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pr(n)),this.vs(t,a,n,Hv(s,Ns)).next((l=>l)))}))}bs(t,n){let r=new $t(Od(t));return n.forEach(((s,i)=>{wo(t,i)&&(r=r.add(i))})),r}Ds(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(t,n,r){return dr()<=dt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",pr(n)),this.gs.getDocumentsMatchingQuery(t,n,Pn.min(),r)}vs(t,n,r,s){return this.gs.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml="LocalStore",wT=3e8;class AT{constructor(t,n,r,s){this.persistence=t,this.Cs=n,this.serializer=s,this.Fs=new Dt(ut),this.Ms=new er((i=>Sl(i)),Rl),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new fT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Fs)))}}function bT(e,t,n,r){return new AT(e,t,n,r)}async function rp(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let c=ct();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next((f=>({Bs:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function ST(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,d){const m=f.batch,v=m.keys();let b=x.resolve();return v.forEach((V=>{b=b.next((()=>d.getEntry(c,V))).next((D=>{const F=f.docVersions.get(V);vt(F!==null,48541),D.version.compareTo(F)<0&&(m.applyToRemoteDocument(D,f),D.isValidDocument()&&(D.setReadTime(f.commitVersion),d.addEntry(D)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(c,m)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=ct();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function sp(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.hi.getLastRemoteSnapshotVersion(n)))}function RT(e,t){const n=st(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];t.targetChanges.forEach(((d,m)=>{const v=s.get(m);if(!v)return;l.push(n.hi.removeMatchingKeys(i,d.removedDocuments,m).next((()=>n.hi.addMatchingKeys(i,d.addedDocuments,m))));let b=v.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?b=b.withResumeToken(Zt.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),s=s.insert(m,b),(function(D,F,W){return D.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=wT?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(v,b,d)&&l.push(n.hi.updateTargetData(i,b))}));let c=ln(),f=ct();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(CT(i,a,t.documentUpdates).next((d=>{c=d.Ls,f=d.ks}))),!r.isEqual(rt.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next((m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return x.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,f))).next((()=>c))})).then((i=>(n.Fs=s,i)))}function CT(e,t,n){let r=ct(),s=ct();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=ln();return n.forEach(((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(rt.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):H(Ml,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{Ls:a,ks:s}}))}function PT(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=wl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function VT(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,t).next((i=>i?(s=i,x.resolve(s)):n.hi.allocateTargetId(r).next((a=>(s=new vn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r}))}async function za(e,t,n){const r=st(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Fr(a))throw a;H(Ml,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function hh(e,t,n){const r=st(e);let s=rt.min(),i=ct();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,f,d){const m=st(c),v=m.Ms.get(d);return v!==void 0?x.resolve(m.Fs.get(v)):m.hi.getTargetData(f,d)})(r,a,Le(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,t,n?s:rt.min(),n?i:ct()))).next((l=>(DT(r,_E(t),l),{documents:l,qs:i})))))}function DT(e,t,n){let r=e.xs.get(t)||rt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.xs.set(t,r)}class fh{constructor(){this.activeTargetIds=wE()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xT{constructor(){this.Fo=new fh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new fh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="ConnectivityMonitor";class ph{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){H(dh,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){H(dh,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vi=null;function Ka(){return vi===null?vi=(function(){return 268435456+Math.round(2147483648*Math.random())})():vi++,"0x"+vi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="RestConnection",OT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kT{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Qi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(t,n,r,s,i){const a=Ka(),l=this.Go(t,n.toUriEncodedString());H(ha,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:f}=new URL(l),d=yl(f);return this.jo(t,l,c,r,d).then((m=>(H(ha,`Received RPC '${t}' ${a}: `,m),m)),(m=>{throw Cn(ha,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m}))}Jo(t,n,r,s,i,a){return this.Wo(t,n,r,s,i)}zo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}Go(t,n){const r=OT[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re="WebChannelConnection";class FT extends kT{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,s,i){const a=Ka();return new Promise(((l,c)=>{const f=new od;f.setWithCredentials(!0),f.listenOnce(ad.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ci.NO_ERROR:const m=f.getResponseJson();H(re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case Ci.TIMEOUT:H(re,`RPC '${t}' ${a} timed out`),c(new G(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ci.HTTP_ERROR:const v=f.getStatus();if(H(re,`RPC '${t}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const V=b==null?void 0:b.error;if(V&&V.status&&V.message){const D=(function(W){const K=W.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(K)>=0?K:N.UNKNOWN})(V.status);c(new G(D,V.message))}else c(new G(N.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new G(N.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:t,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{H(re,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(re,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}P_(t,n,r){const s=Ka(),i=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=cd(),l=ud(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");H(re,`Creating RPC '${t}' stream ${s}: ${d}`,c);const m=a.createWebChannel(d,c);this.T_(m);let v=!1,b=!1;const V=new MT({Ho:F=>{b?H(re,`Not sending because RPC '${t}' stream ${s} is closed:`,F):(v||(H(re,`Opening RPC '${t}' stream ${s} transport.`),m.open(),v=!0),H(re,`RPC '${t}' stream ${s} sending:`,F),m.send(F))},Yo:()=>m.close()}),D=(F,W,K)=>{F.listen(W,(Q=>{try{K(Q)}catch(z){setTimeout((()=>{throw z}),0)}}))};return D(m,as.EventType.OPEN,(()=>{b||(H(re,`RPC '${t}' stream ${s} transport opened.`),V.s_())})),D(m,as.EventType.CLOSE,(()=>{b||(b=!0,H(re,`RPC '${t}' stream ${s} transport closed`),V.__(),this.I_(m))})),D(m,as.EventType.ERROR,(F=>{b||(b=!0,Cn(re,`RPC '${t}' stream ${s} transport errored. Name:`,F.name,"Message:",F.message),V.__(new G(N.UNAVAILABLE,"The operation could not be completed")))})),D(m,as.EventType.MESSAGE,(F=>{var W;if(!b){const K=F.data[0];vt(!!K,16349);const Q=K,z=(Q==null?void 0:Q.error)||((W=Q[0])===null||W===void 0?void 0:W.error);if(z){H(re,`RPC '${t}' stream ${s} received error:`,z);const lt=z.status;let Et=(function(_){const T=kt[_];if(T!==void 0)return zd(T)})(lt),I=z.message;Et===void 0&&(Et=N.INTERNAL,I="Unknown error status: "+lt+" with message "+z.message),b=!0,V.__(new G(Et,I)),m.close()}else H(re,`RPC '${t}' stream ${s} received:`,K),V.a_(K)}})),D(l,ld.STAT_EVENT,(F=>{F.stat===Oa.PROXY?H(re,`RPC '${t}' stream ${s} detected buffering proxy`):F.stat===Oa.NOPROXY&&H(re,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((n=>n===t))}}function fa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(e){return new jE(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="PersistentStream";class op{constructor(t,n,r,s,i,a,l,c){this.Fi=t,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ip(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(an(n.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{t((()=>{const s=new G(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return H(mh,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget((()=>this.b_===t?n():(H(mh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LT extends op{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=HE(this.serializer,t),r=(function(i){if(!("targetChange"in i))return rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?rt.min():a.readTime?Ue(a.readTime):rt.min()})(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=Ha(this.serializer),n.addTarget=(function(i,a){let l;const c=a.target;if(l=Ba(c)?{documents:WE(i,c)}:{query:GE(i,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Gd(i,a.resumeToken);const f=ja(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(rt.min())>0){l.readTime=eo(i,a.snapshotVersion.toTimestamp());const f=ja(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=XE(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=Ha(this.serializer),n.removeTarget=t,this.k_(n)}}class BT extends op{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return vt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,vt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){vt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=KE(t.writeResults,t.commitTime),r=Ue(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=Ha(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>zE(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{}class jT extends UT{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(t,$a(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(N.UNKNOWN,i.toString())}))}Jo(t,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Jo(t,$a(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(N.UNKNOWN,a.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class $T{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(an(n),this._a=!1):H("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="RemoteStore";class qT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo((a=>{r.enqueueAndForget((async()=>{rr(this)&&(H(Jn,"Restarting streams for network reachability change."),await(async function(c){const f=st(c);f.Ia.add(4),await Ks(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Co(f)})(this))}))})),this.Aa=new $T(r,s)}}async function Co(e){if(rr(e))for(const t of e.da)await t(!0)}async function Ks(e){for(const t of e.da)await t(!1)}function ap(e,t){const n=st(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Ul(n)?Bl(n):Lr(n).x_()&&Ll(n,t))}function Fl(e,t){const n=st(e),r=Lr(n);n.Ta.delete(t),r.x_()&&lp(n,t),n.Ta.size===0&&(r.x_()?r.B_():rr(n)&&n.Aa.set("Unknown"))}function Ll(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Lr(e).H_(t)}function lp(e,t){e.Ra.$e(t),Lr(e).Y_(t)}function Bl(e){e.Ra=new FE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Lr(e).start(),e.Aa.aa()}function Ul(e){return rr(e)&&!Lr(e).M_()&&e.Ta.size>0}function rr(e){return st(e).Ia.size===0}function up(e){e.Ra=void 0}async function HT(e){e.Aa.set("Online")}async function zT(e){e.Ta.forEach(((t,n)=>{Ll(e,t)}))}async function KT(e,t){up(e),Ul(e)?(e.Aa.la(t),Bl(e)):e.Aa.set("Unknown")}async function WT(e,t,n){if(e.Aa.set("Online"),t instanceof Wd&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))})(e,t)}catch(r){H(Jn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await ro(e,r)}else if(t instanceof xi?e.Ra.Ye(t):t instanceof Kd?e.Ra.it(t):e.Ra.et(t),!n.isEqual(rt.min()))try{const r=await sp(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ta.get(f);d&&i.Ta.set(f,d.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,f)=>{const d=i.Ta.get(c);if(!d)return;i.Ta.set(c,d.withResumeToken(Zt.EMPTY_BYTE_STRING,d.snapshotVersion)),lp(i,c);const m=new vn(d.target,c,f,d.sequenceNumber);Ll(i,m)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Jn,"Failed to raise snapshot:",r),await ro(e,r)}}async function ro(e,t,n){if(!Fr(t))throw t;e.Ia.add(1),await Ks(e),e.Aa.set("Offline"),n||(n=()=>sp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Jn,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Co(e)}))}function cp(e,t){return t().catch((n=>ro(e,n,t)))}async function Po(e){const t=st(e),n=Nn(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:wl;for(;GT(t);)try{const s=await PT(t.localStore,r);if(s===null){t.Pa.length===0&&n.B_();break}r=s.batchId,QT(t,s)}catch(s){await ro(t,s)}hp(t)&&fp(t)}function GT(e){return rr(e)&&e.Pa.length<10}function QT(e,t){e.Pa.push(t);const n=Nn(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function hp(e){return rr(e)&&!Nn(e).M_()&&e.Pa.length>0}function fp(e){Nn(e).start()}async function XT(e){Nn(e).na()}async function JT(e){const t=Nn(e);for(const n of e.Pa)t.X_(n.mutations)}async function YT(e,t,n){const r=e.Pa.shift(),s=Vl.from(r,t,n);await cp(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Po(e)}async function ZT(e,t){t&&Nn(e).Z_&&await(async function(r,s){if((function(a){return kE(a)&&a!==N.ABORTED})(s.code)){const i=r.Pa.shift();Nn(r).N_(),await cp(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Po(r)}})(e,t),hp(e)&&fp(e)}async function gh(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H(Jn,"RemoteStore received new credentials");const r=rr(n);n.Ia.add(3),await Ks(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Co(n)}async function tI(e,t){const n=st(e);t?(n.Ia.delete(2),await Co(n)):t||(n.Ia.add(2),await Ks(n),n.Aa.set("Unknown"))}function Lr(e){return e.Va||(e.Va=(function(n,r,s){const i=st(n);return i.ia(),new LT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:HT.bind(null,e),e_:zT.bind(null,e),n_:KT.bind(null,e),J_:WT.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),Ul(e)?Bl(e):e.Aa.set("Unknown")):(await e.Va.stop(),up(e))}))),e.Va}function Nn(e){return e.ma||(e.ma=(function(n,r,s){const i=st(n);return i.ia(),new BT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:XT.bind(null,e),n_:ZT.bind(null,e),ea:JT.bind(null,e),ta:YT.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await Po(e)):(await e.ma.stop(),e.Pa.length>0&&(H(Jn,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new jl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(N.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(e,t){if(an("AsyncQueue",`${t}: ${e}`),Fr(e))return new G(N.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{static emptySet(t){return new wr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ls(),this.sortedSet=new Dt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof wr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new wr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.fa=new Dt(J.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):tt(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal(((n,r)=>{t.push(r)})),t}}class xr{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new xr(t,n,wr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Io(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class nI{constructor(){this.queries=yh(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=st(n),i=s.queries;s.queries=yh(),i.forEach(((a,l)=>{for(const c of l.wa)c.onError(r)}))})(this,new G(N.ABORTED,"Firestore shutting down"))}}function yh(){return new er((e=>Nd(e)),Io)}async function rI(e,t){const n=st(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new eI,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=$l(a,`Initialization of query '${pr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&ql(n)}async function sI(e,t){const n=st(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.wa.indexOf(t);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iI(e,t){const n=st(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(r=!0);a.ya=s}}r&&ql(n)}function oI(e,t,n){const r=st(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function ql(e){e.Da.forEach((t=>{t.next()}))}var Wa,vh;(vh=Wa||(Wa={})).Fa="default",vh.Cache="cache";class aI{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new xr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=xr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Wa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(t){this.key=t}}class pp{constructor(t){this.key=t}}class lI{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ct(),this.mutatedKeys=ct(),this.Xa=Od(t),this.eu=new wr(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new _h,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,m)=>{const v=s.get(d),b=wo(this.query,m)?m:null,V=!!v&&this.mutatedKeys.has(v.key),D=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let F=!1;v&&b?v.data.isEqual(b.data)?V!==D&&(r.track({type:3,doc:b}),F=!0):this.iu(v,b)||(r.track({type:2,doc:b}),F=!0,(c&&this.Xa(b,c)>0||f&&this.Xa(b,f)<0)&&(l=!0)):!v&&b?(r.track({type:0,doc:b}),F=!0):v&&!b&&(r.track({type:1,doc:v}),F=!0,(c||f)&&(l=!0)),F&&(b?(a=a.add(b),i=D?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:a,ru:r,Ds:l,mutatedKeys:i}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort(((d,m)=>(function(b,V){const D=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:F})}};return D(b)-D(V)})(d.type,m.type)||this.Xa(d.doc,m.doc))),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,f=c!==this.Ya;return this.Ya=c,a.length!==0||f?{snapshot:new xr(this.query,t.eu,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new _h,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=ct(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return t.forEach((r=>{this.Za.has(r)||n.push(new pp(r))})),this.Za.forEach((r=>{t.has(r)||n.push(new dp(r))})),n}uu(t){this.Ha=t.qs,this.Za=ct();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return xr.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Hl="SyncEngine";class uI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class cI{constructor(t){this.key=t,this.lu=!1}}class hI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new er((l=>Nd(l)),Io),this.Tu=new Map,this.Iu=new Set,this.du=new Dt(J.comparator),this.Eu=new Map,this.Au=new Nl,this.Ru={},this.Vu=new Map,this.mu=Dr.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function fI(e,t,n=!0){const r=Ep(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await mp(r,t,n,!0),s}async function dI(e,t){const n=Ep(e);await mp(n,t,!0,!1)}async function mp(e,t,n,r){const s=await VT(e.localStore,Le(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await pI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&ap(e.remoteStore,s),l}async function pI(e,t,n,r,s){e.gu=(m,v,b)=>(async function(D,F,W,K){let Q=F.view.nu(W);Q.Ds&&(Q=await hh(D.localStore,F.query,!1).then((({documents:I})=>F.view.nu(I,Q))));const z=K&&K.targetChanges.get(F.targetId),lt=K&&K.targetMismatches.get(F.targetId)!=null,Et=F.view.applyChanges(Q,D.isPrimaryClient,z,lt);return Th(D,F.targetId,Et._u),Et.snapshot})(e,m,v,b);const i=await hh(e.localStore,t,!0),a=new lI(t,i.qs),l=a.nu(i.documents),c=zs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);Th(e,n,f._u);const d=new uI(t,n,a);return e.Pu.set(t,d),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),f.snapshot}async function mI(e,t,n){const r=st(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter((a=>!Io(a,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await za(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fl(r.remoteStore,s.targetId),Ga(r,s.targetId)})).catch(Mr)):(Ga(r,s.targetId),await za(r.localStore,s.targetId,!0))}async function gI(e,t){const n=st(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fl(n.remoteStore,r.targetId))}async function _I(e,t,n){const r=AI(e);try{const s=await(function(a,l){const c=st(a),f=Ct.now(),d=l.reduce(((b,V)=>b.add(V.key)),ct());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let V=ln(),D=ct();return c.Os.getEntries(b,d).next((F=>{V=F,V.forEach(((W,K)=>{K.isValidDocument()||(D=D.add(W))}))})).next((()=>c.localDocuments.getOverlayedDocuments(b,V))).next((F=>{m=F;const W=[];for(const K of l){const Q=VE(K,m.get(K.key).overlayedDocument);Q!=null&&W.push(new nr(K.key,Q,bd(Q.value.mapValue),Be.exists(!0)))}return c.mutationQueue.addMutationBatch(b,f,W,l)})).next((F=>{v=F;const W=F.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(b,F.batchId,W)}))})).then((()=>({batchId:v.batchId,changes:Md(m)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,c){let f=a.Ru[a.currentUser.toKey()];f||(f=new Dt(ut)),f=f.insert(l,c),a.Ru[a.currentUser.toKey()]=f})(r,s.batchId,n),await Ws(r,s.changes),await Po(r.remoteStore)}catch(s){const i=$l(s,"Failed to persist write");n.reject(i)}}async function gp(e,t){const n=st(e);try{const r=await RT(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Eu.get(i);a&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?vt(a.lu,14607):s.removedDocuments.size>0&&(vt(a.lu,42227),a.lu=!1))})),await Ws(n,r,t)}catch(r){await Mr(r)}}function Eh(e,t,n){const r=st(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const c=st(a);c.onlineState=l;let f=!1;c.queries.forEach(((d,m)=>{for(const v of m.wa)v.va(l)&&(f=!0)})),f&&ql(c)})(r.eventManager,t),s.length&&r.hu.J_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yI(e,t,n){const r=st(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new Dt(J.comparator);a=a.insert(i,ae.newNoDocument(i,rt.min()));const l=ct().add(i),c=new So(rt.min(),new Map,new Dt(ut),a,l);await gp(r,c),r.du=r.du.remove(i),r.Eu.delete(t),zl(r)}else await za(r.localStore,t,!1).then((()=>Ga(r,t,n))).catch(Mr)}async function vI(e,t){const n=st(e),r=t.batch.batchId;try{const s=await ST(n.localStore,t);yp(n,r,null),_p(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ws(n,s)}catch(s){await Mr(s)}}async function EI(e,t,n){const r=st(e);try{const s=await(function(a,l){const c=st(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return c.mutationQueue.lookupMutationBatch(f,l).next((m=>(vt(m!==null,37113),d=m.keys(),c.mutationQueue.removeMutationBatch(f,m)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>c.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);yp(r,t,n),_p(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ws(r,s)}catch(s){await Mr(s)}}function _p(e,t){(e.Vu.get(t)||[]).forEach((n=>{n.resolve()})),e.Vu.delete(t)}function yp(e,t,n){const r=st(e);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function Ga(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((r=>{e.Au.containsKey(r)||vp(e,r)}))}function vp(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Fl(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),zl(e))}function Th(e,t,n){for(const r of n)r instanceof dp?(e.Au.addReference(r.key,t),TI(e,r)):r instanceof pp?(H(Hl,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||vp(e,r.key)):tt(19791,{yu:r})}function TI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(H(Hl,"New document in limbo: "+n),e.Iu.add(r),zl(e))}function zl(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new J(Rt.fromString(t)),r=e.mu.next();e.Eu.set(r,new cI(n)),e.du=e.du.insert(n,r),ap(e.remoteStore,new vn(Le(xd(n.path)),r,"TargetPurposeLimboResolution",yo.ue))}}async function Ws(e,t,n){const r=st(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach(((l,c)=>{a.push(r.gu(c,t,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){s.push(f);const m=kl.Es(c.targetId,f);i.push(m)}})))})),await Promise.all(a),r.hu.J_(s),await(async function(c,f){const d=st(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>x.forEach(f,(v=>x.forEach(v.Is,(b=>d.persistence.referenceDelegate.addReference(m,v.targetId,b))).next((()=>x.forEach(v.ds,(b=>d.persistence.referenceDelegate.removeReference(m,v.targetId,b)))))))))}catch(m){if(!Fr(m))throw m;H(Ml,"Failed to update sequence numbers: "+m)}for(const m of f){const v=m.targetId;if(!m.fromCache){const b=d.Fs.get(v),V=b.snapshotVersion,D=b.withLastLimboFreeSnapshotVersion(V);d.Fs=d.Fs.insert(v,D)}}})(r.localStore,i))}async function II(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H(Hl,"User change. New user:",t.toKey());const r=await rp(n.localStore,t);n.currentUser=t,(function(i,a){i.Vu.forEach((l=>{l.forEach((c=>{c.reject(new G(N.CANCELLED,a))}))})),i.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ws(n,r.Bs)}}function wI(e,t){const n=st(e),r=n.Eu.get(t);if(r&&r.lu)return ct().add(r.key);{let s=ct();const i=n.Tu.get(t);if(!i)return s;for(const a of i){const l=n.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function Ep(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yI.bind(null,t),t.hu.J_=iI.bind(null,t.eventManager),t.hu.pu=oI.bind(null,t.eventManager),t}function AI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=EI.bind(null,t),t}class so{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ro(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return bT(this.persistence,new IT,t.initialUser,this.serializer)}Du(t){return new np(Ol.Vi,this.serializer)}bu(t){return new xT}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}so.provider={build:()=>new so};class bI extends so{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){vt(this.persistence.referenceDelegate instanceof no,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new aT(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?me.withCacheSize(this.cacheSizeBytes):me.DEFAULT;return new np((r=>no.Vi(r,n)),this.serializer)}}class Qa{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Eh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=II.bind(null,this.syncEngine),await tI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new nI})()}createDatastore(t){const n=Ro(t.databaseInfo.databaseId),r=(function(i){return new FT(i)})(t.databaseInfo);return(function(i,a,l,c){return new jT(i,a,l,c)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new qT(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>Eh(this.syncEngine,n,0)),(function(){return ph.C()?new ph:new NT})())}createSyncEngine(t,n){return(function(s,i,a,l,c,f,d){const m=new hI(s,i,a,l,c,f);return d&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(s){const i=st(s);H(Jn,"RemoteStore shutting down."),i.Ia.add(5),await Ks(i),i.Ea.shutdown(),i.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qa.provider={build:()=>new Qa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):an("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="FirestoreClient";class RI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ie.UNAUTHENTICATED,this.clientId=Tl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(On,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(On,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$l(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function da(e,t){e.asyncQueue.verifyOperationInProgress(),H(On,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await rp(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>{Cn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then((()=>{H("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Cn("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),e._offlineComponents=t}async function Ih(e,t){e.asyncQueue.verifyOperationInProgress();const n=await CI(e);H(On,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>gh(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>gh(t.remoteStore,s))),e._onlineComponents=t}async function CI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(On,"Using user provided OfflineComponentProvider");try{await da(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===N.FAILED_PRECONDITION||s.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Cn("Error using user provided cache. Falling back to memory cache: "+n),await da(e,new so)}}else H(On,"Using default OfflineComponentProvider"),await da(e,new bI(void 0));return e._offlineComponents}async function Tp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(On,"Using user provided OnlineComponentProvider"),await Ih(e,e._uninitializedComponentsProvider._online)):(H(On,"Using default OnlineComponentProvider"),await Ih(e,new Qa))),e._onlineComponents}function PI(e){return Tp(e).then((t=>t.syncEngine))}async function VI(e){const t=await Tp(e),n=t.eventManager;return n.onListen=fI.bind(null,t.syncEngine),n.onUnlisten=mI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=gI.bind(null,t.syncEngine),n}function DI(e,t,n={}){const r=new An;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,c,f){const d=new SI({next:v=>{d.Ou(),a.enqueueAndForget((()=>sI(i,m))),v.fromCache&&c.source==="server"?f.reject(new G(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),m=new aI(l,d,{includeMetadataChanges:!0,ka:!0});return rI(i,m)})(await VI(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="firestore.googleapis.com",Ah=!0;class bh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new G(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wp,this.ssl=Ah}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Ah;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ep;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<iT)throw new G(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ip((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Vo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new G(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ov;switch(r.type){case"firstParty":return new Lv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=wh.get(n);r&&(H("ComponentProvider","Removing Datastore"),wh.delete(n),r.terminate())})(this),Promise.resolve()}}function xI(e,t,n,r={}){var s;e=Cr(e,Vo);const i=yl(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(uy(`https://${c}`),dy("Firestore",!0)),a.host!==wp&&a.host!==c&&Cn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!zi(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=ie.MOCK_USER;else{d=cy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new G(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ie(v)}e._authCredentials=new kv(new fd(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Do(this.firestore,t,this._query)}}class zt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zt(this.firestore,t,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(qs(n,zt._jsonSchema))return new zt(t,r||null,new J(Rt.fromString(n.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Mt("string",zt._jsonSchemaVersion),referencePath:Mt("string")};class bn extends Do{constructor(t,n,r){super(t,n,xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zt(this.firestore,null,new J(t))}withConverter(t){return new bn(this.firestore,t,this._path)}}function Ei(e,t,...n){if(e=Vs(e),pd("collection","path",t),e instanceof Vo){const r=Rt.fromString(t,...n);return Bc(r),new bn(e,null,r)}{if(!(e instanceof zt||e instanceof bn))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Bc(r),new bn(e.firestore,null,r)}}function Sh(e,t,...n){if(e=Vs(e),arguments.length===1&&(t=Tl.newId()),pd("doc","path",t),e instanceof Vo){const r=Rt.fromString(t,...n);return Lc(r),new zt(e,null,new J(r))}{if(!(e instanceof zt||e instanceof bn))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Lc(r),new zt(e.firestore,e instanceof bn?e.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="AsyncQueue";class Ch{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ip(this,"async_queue_retry"),this.oc=()=>{const r=fa();r&&H(Rh,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=fa();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=fa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new An;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Fr(t))throw t;H(Rh,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((r=>{throw this.tc=r,this.nc=!1,an("INTERNAL UNHANDLED ERROR: ",Ph(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const s=jl.createAndSchedule(this,t,n,r,(i=>this.lc(i)));return this.ec.push(s),s}ac(){this.tc&&tt(47125,{hc:Ph(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function Ph(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class xo extends Vo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Ch,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ch(t),this._firestoreClient=void 0,await t}}}function NI(e,t){const n=typeof e=="object"?e:wv(),r=typeof e=="string"?e:Qi,s=yv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ay("firestore");i&&xI(s,...i)}return s}function Ap(e){if(e._terminated)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||OI(e),e._firestoreClient}function OI(e){var t,n,r;const s=e._freezeSettings(),i=(function(l,c,f,d){return new tE(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ip(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new RI(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this._byteString=t}static fromBase64String(t){try{return new we(Zt.fromBase64String(t))}catch(n){throw new G(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new we(Zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:we._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(qs(t,we._jsonSchema))return we.fromBase64String(t.bytes)}}we._jsonSchemaVersion="firestore/bytes/1.0",we._jsonSchema={type:Mt("string",we._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new G(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new G(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new G(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:je._jsonSchemaVersion}}static fromJSON(t){if(qs(t,je._jsonSchema))return new je(t.latitude,t.longitude)}}je._jsonSchemaVersion="firestore/geoPoint/1.0",je._jsonSchema={type:Mt("string",je._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:$e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(qs(t,$e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new $e(t.vectorValues);throw new G(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$e._jsonSchemaVersion="firestore/vectorValue/1.0",$e._jsonSchema={type:Mt("string",$e._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=/^__.*__$/;class MI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new nr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Hs(t,this.data,n,this.fieldTransforms)}}function Sp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:e})}}class Wl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Wl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.fc(t),s}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return io(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(Sp(this.Ec)&&kI.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class FI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ro(t)}Dc(t,n,r,s=!1){return new Wl({Ec:t,methodName:n,bc:r,path:Yt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LI(e){const t=e._freezeSettings(),n=Ro(e._databaseId);return new FI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function BI(e,t,n,r,s,i={}){const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Vp("Data must be an object, but it was:",a,r);const l=Cp(r,a);let c,f;if(i.merge)c=new Ce(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const v=UI(t,m,n);if(!a.contains(v))throw new G(N.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);$I(d,v)||d.push(v)}c=new Ce(d),f=a.fieldTransforms.filter((m=>c.covers(m.field)))}else c=null,f=a.fieldTransforms;return new MI(new Ie(l),c,f)}function Rp(e,t){if(Pp(e=Vs(e)))return Vp("Unsupported field value:",t,e),Cp(e,t);if(e instanceof bp)return(function(r,s){if(!Sp(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let c=Rp(l,s.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=Vs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ct.fromDate(r);return{timestampValue:eo(s.serializer,i)}}if(r instanceof Ct){const i=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eo(s.serializer,i)}}if(r instanceof je)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof we)return{bytesValue:Gd(s.serializer,r._byteString)};if(r instanceof zt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof $e)return(function(a,l){return{mapValue:{fields:{[wd]:{stringValue:Ad},[Xi]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return Cl(l.serializer,f)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${Il(r)}`)})(e,t)}function Cp(e,t){const n={};return _d(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tr(e,((r,s)=>{const i=Rp(s,t.Vc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Pp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ct||e instanceof je||e instanceof we||e instanceof zt||e instanceof bp||e instanceof $e)}function Vp(e,t,n){if(!Pp(n)||!md(n)){const r=Il(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function UI(e,t,n){if((t=Vs(t))instanceof Kl)return t._internalPath;if(typeof t=="string")return Dp(e,t);throw io("Field path arguments must be of type string or ",e,!1,void 0,n)}const jI=new RegExp("[~\\*/\\[\\]]");function Dp(e,t,n){if(t.search(jI)>=0)throw io(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Kl(...t.split("."))._internalPath}catch{throw io(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function io(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new G(N.INVALID_ARGUMENT,l+e+c)}function $I(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Np("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qI extends xp{data(){return super.data()}}function Np(e,t){return typeof t=="string"?Dp(e,t):t instanceof Kl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new G(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zI{convertValue(t,n="none"){switch(xn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Nt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Dn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return tr(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Xi].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((a=>Nt(a.doubleValue)));return new $e(i)}convertGeoPoint(t){return new je(Nt(t.latitude),Nt(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Eo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Os(t));default:return null}}convertTimestamp(t){const n=Vn(t);return new Ct(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Rt.fromString(t);vt(tp(r),9688,{name:t});const s=new ks(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||an(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class Ti{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ar extends xp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ni(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Np("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ar._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ar._jsonSchema={type:Mt("string",Ar._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class Ni extends Ar{data(t={}){return super.data(t)}}class br{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ti(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Ni(this._firestore,this._userDataWriter,r.key,r,new Ti(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const c=new Ni(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ti(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new Ni(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ti(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:WI(l.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=br._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Tl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}br._jsonSchemaVersion="firestore/querySnapshot/1.0",br._jsonSchema={type:Mt("string",br._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class GI extends zI{constructor(t){super(),this.firestore=t}convertBytes(t){return new we(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function Ii(e){e=Cr(e,Do);const t=Cr(e.firestore,xo),n=Ap(t),r=new GI(t);return HI(e._query),DI(n,e._query).then((s=>new br(t,r,e,s)))}function QI(e,t,n){e=Cr(e,zt);const r=Cr(e.firestore,xo),s=KI(e.converter,t);return Op(r,[BI(LI(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Be.none())])}function XI(e){return Op(Cr(e.firestore,xo),[new Pl(e._key,Be.none())])}function Op(e,t){return(function(r,s){const i=new An;return r.asyncQueue.enqueueAndForget((async()=>_I(await PI(r),s,i))),i.promise})(Ap(e),t)}(function(t,n=!0){(function(s){kr=s})(Iv),Wi(new Ds("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new xo(new Mv(r.getProvider("auth-internal")),new Bv(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new G(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(f.options.projectId,d)})(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Ir(Nc,Oc,t),Ir(Nc,Oc,"esm2017")})();var JI="firebase",YI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(JI,YI,"app");const ZI={apiKey:"AIzaSyD99666drVz_ZYI3wx75IAkSDb4Pn8-IwM",authDomain:"cis-371-4eff3.firebaseapp.com",projectId:"cis-371-4eff3",storageBucket:"cis-371-4eff3.firebasestorage.app",messagingSenderId:"772947264565",appId:"1:772947264565:web:214eb352e7f99894da1d7c"},tw=nd(ZI),hr=NI(tw),No=M_("BeverageStore",{state:()=>({Temps:Ec,currentTemp:Ec[0],Base:[],currentBase:null,Cream:[],currentCream:null,Syrup:[],currentSyrup:null,savedBeverages:[]}),actions:{async loadIngredients(){console.log("Loading ingredients");const e=await Ii(Ei(hr,"Bases"));console.log("Base docs:",e.docs.length);const t=await Ii(Ei(hr,"Creamers"));console.log("Cream docs:",t.docs.length);const n=await Ii(Ei(hr,"Syrups"));console.log("Syrup docs:",n.docs.length),this.Base=e.docs.map(r=>({id:r.id,...r.data()})),this.Cream=t.docs.map(r=>({id:r.id,...r.data()})),this.Syrup=n.docs.map(r=>({id:r.id,...r.data()})),this.Base.length>0&&(this.currentBase=this.Base[0]),this.Cream.length>0&&(this.currentCream=this.Cream[0]),this.Syrup.length>0&&(this.currentSyrup=this.Syrup[0])},async loadBeverages(){const e=await Ii(Ei(hr,"Beverages"));this.savedBeverages=e.docs.map(t=>({id:t.id,...t.data()}))},async makeBeverage(e){const t=crypto.randomUUID(),n={name:e,temp:this.currentTemp,baseId:this.currentBase.id,creamId:this.currentCream.id,syrupId:this.currentSyrup.id};await QI(Sh(hr,"Beverages",t),n),this.savedBeverages.push({id:t,...n})},showBeverage(e){const t=this.savedBeverages.find(n=>n.id===e);t&&(this.currentTemp=t.temp,this.currentBase=this.Base.find(n=>n.id===t.baseId),this.currentCream=this.Cream.find(n=>n.id===t.creamId),this.currentSyrup=this.Syrup.find(n=>n.id===t.syrupId))},async deleteBeverage(e){await XI(Sh(hr,"Beverages",e)),this.savedBeverages=this.savedBeverages.filter(t=>t.id!==e)}},persist:!1});function be(){return No()}const kp=Ke(()=>{var e;return(e=be().currentBase)==null?void 0:e.color}),ew=Ke(()=>{var e;return(e=be().currentCream)==null?void 0:e.color}),Vh=Ke(()=>{var e;return(e=be().currentSyrup)==null?void 0:e.color}),pa=Ke({get:()=>{var e;return((e=be().currentBase)==null?void 0:e.id)??""},set:e=>{be().currentBase=be().Base.find(t=>t.id===e)??null}}),ma=Ke({get:()=>{var e;return((e=be().currentCream)==null?void 0:e.id)??""},set:e=>{be().currentCream=be().Cream.find(t=>t.id===e)??null}}),ga=Ke({get:()=>{var e;return((e=be().currentSyrup)==null?void 0:e.id)??""},set:e=>{be().currentSyrup=be().Syrup.find(t=>t.id===e)??null}}),nw=js({__name:"Syrup",setup(e){const t=Ke(()=>Vh.value==="#c6c6c6"?kp.value:Vh.value);return(n,r)=>(_t(),Pt("div",{class:"syrup",style:Nr({"--SColor":t.value})},null,4))}}),rw=Zn(nw,[["__scopeId","data-v-8e00e442"]]),sw=js({__name:"Base",setup(e){return(t,n)=>(_t(),Pt("div",{class:"baseBeverage",style:Nr({"--Bcolor":qt(kp)})},null,4))}}),iw=Zn(sw,[["__scopeId","data-v-f98bdce3"]]),ow={class:"froth"},aw=js({__name:"Creamer",setup(e){return(t,n)=>(_t(),Pt("div",ow,[(_t(),Pt(Ot,null,_n(5,()=>Ut("div",{class:"foam",style:Nr({"--Ccolor":qt(ew)})},null,4)),64))]))}}),lw=Zn(aw,[["__scopeId","data-v-3aa977af"]]),uw={},cw={id:"steam"},hw={class:"stream"};function fw(e,t){return _t(),Pt("div",cw,[(_t(),Pt(Ot,null,_n(3,()=>Ut("div",hw)),64))])}const dw=Zn(uw,[["render",fw]]),pw={},mw={id:"condensation"},gw={class:"flake"};function _w(e,t){return _t(),Pt("div",mw,[(_t(),Pt(Ot,null,_n(3,()=>Ut("div",gw)),64))])}const yw=Zn(pw,[["render",_w]]),vw=js({__name:"Beverage",props:{isIced:{type:Boolean}},setup(e){const t=No();return(n,r)=>(_t(),yn(X_,null,{default:ss(()=>[e.isIced?(_t(),yn(yw,{key:0})):(_t(),yn(dw,{key:1})),ve(K_,null,{top:ss(()=>{var s;return[((s=qt(t).currentCream)==null?void 0:s.color)!=="transparent"?(_t(),yn(lw,{key:0})):_s("",!0)]}),mid:ss(()=>{var s;return[((s=qt(t).currentSyrup)==null?void 0:s.color)!=="transparent"?(_t(),yn(rw,{key:0})):_s("",!0)]}),bottom:ss(()=>[ve(iw)]),_:1})]),_:1}))}}),Ew=["id","value"],Tw={key:0},Iw=["id","value"],ww={key:1},Aw=["id","value"],bw={key:2},Sw=["id","value"],Rw={class:"actions"},Cw={class:"Saved"},Pw=["id","value","onClick"],Vw=["onClick"],Dw=js({__name:"App",setup(e){const t=No(),{Temps:n,Base:r,Cream:s,Syrup:i,currentTemp:a,savedBeverages:l}=F_(t),c=Ss(""),f=Ss(!0);gf(async()=>{await t.loadIngredients(),f.value=!1});function d(){c.value.trim()&&(t.makeBeverage(c.value.trim()),c.value="")}function m(b){t.showBeverage(b)}function v(b){t.deleteBeverage(b)}return(b,V)=>(_t(),Pt("div",null,[ve(vw,{isIced:qt(a)==="Cold"},null,8,["isIced"]),Ut("ul",null,[Ut("li",null,[(_t(!0),Pt(Ot,null,_n(qt(n),D=>(_t(),Pt("label",{key:D},[es(Ut("input",{type:"radio",name:"temperature",id:`temp-${D}`,value:D,"onUpdate:modelValue":V[0]||(V[0]=F=>wt(a)?a.value=F:null)},null,8,Ew),[[pi,qt(a)]]),os(" "+rs(D),1)]))),128))]),qt(r).length?(_t(),Pt("li",Tw,[(_t(!0),Pt(Ot,null,_n(qt(r),D=>(_t(),Pt("label",{key:D.id},[es(Ut("input",{type:"radio",name:"base",id:`base-${D.id}`,value:D.id,"onUpdate:modelValue":V[1]||(V[1]=F=>wt(pa)?pa.value=F:null)},null,8,Iw),[[pi,qt(pa)]]),os(" "+rs(D.name),1)]))),128))])):_s("",!0),qt(s).length?(_t(),Pt("li",ww,[(_t(!0),Pt(Ot,null,_n(qt(s),D=>(_t(),Pt("label",{key:D.id},[es(Ut("input",{type:"radio",name:"cream",id:`cream-${D.id}`,value:D.id,"onUpdate:modelValue":V[2]||(V[2]=F=>wt(ma)?ma.value=F:null)},null,8,Aw),[[pi,qt(ma)]]),os(" "+rs(D.name),1)]))),128))])):_s("",!0),qt(i).length?(_t(),Pt("li",bw,[(_t(!0),Pt(Ot,null,_n(qt(i),D=>(_t(),Pt("label",{key:D.id},[es(Ut("input",{type:"radio",name:"syrup",id:`syrup-${D.id}`,value:D.id,"onUpdate:modelValue":V[3]||(V[3]=F=>wt(ga)?ga.value=F:null)},null,8,Sw),[[pi,qt(ga)]]),os(" "+rs(D.name),1)]))),128))])):_s("",!0)]),Ut("div",Rw,[Ut("ul",null,[es(Ut("input",{"onUpdate:modelValue":V[4]||(V[4]=D=>c.value=D),placeholder:"Name your drink"},null,512),[[w_,c.value]]),Ut("button",{onClick:d},"Save")]),Ut("ul",Cw,[(_t(!0),Pt(Ot,null,_n(qt(l),D=>(_t(),Pt(Ot,{key:D.id},[Ut("label",null,[Ut("input",{type:"button",id:`saved-${D.id}`,value:D.name,onClick:F=>m(D.id)},null,8,Pw)]),Ut("button",{onClick:F=>v(D.id)},"X",8,Vw)],64))),128))])])]))}}),Mp=V_();Mp.use($_);R_(Dw).use(Mp).mount("#app");const xw=No();xw.loadIngredients();
